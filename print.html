<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>HPC Training</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Monash DeepNeuron&#x27;s HPC Training Content">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="home.html">Welcome</a></li><li class="chapter-item expanded "><a href="chapter1/getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter1/github.html"><strong aria-hidden="true">1.1.</strong> GitHub</a></li><li class="chapter-item expanded "><a href="chapter1/windows.html"><strong aria-hidden="true">1.2.</strong> Windows</a></li><li class="chapter-item expanded "><a href="chapter1/mac.html"><strong aria-hidden="true">1.3.</strong> Mac</a></li><li class="chapter-item expanded "><a href="chapter1/linux.html"><strong aria-hidden="true">1.4.</strong> Linux</a></li><li class="chapter-item expanded "><a href="chapter1/wsl.html"><strong aria-hidden="true">1.5.</strong> WSL</a></li><li class="chapter-item expanded "><a href="chapter1/challenges.html"><strong aria-hidden="true">1.6.</strong> Challenges</a></li></ol></li><li class="chapter-item expanded "><a href="chapter2/intro-to-c.html"><strong aria-hidden="true">2.</strong> Brief Introduction to C</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter2/helloworld.html"><strong aria-hidden="true">2.1.</strong> Hello World</a></li><li class="chapter-item expanded "><a href="chapter2/compilation.html"><strong aria-hidden="true">2.2.</strong> Compilation</a></li><li class="chapter-item expanded "><a href="chapter2/vars.html"><strong aria-hidden="true">2.3.</strong> Types &amp; Variables</a></li><li class="chapter-item expanded "><a href="chapter2/printing.html"><strong aria-hidden="true">2.4.</strong> Printing</a></li><li class="chapter-item expanded "><a href="chapter2/array.html"><strong aria-hidden="true">2.5.</strong> Arrays &amp; Strings</a></li><li class="chapter-item expanded "><a href="chapter2/ctrl-flow.html"><strong aria-hidden="true">2.6.</strong> Control Flow</a></li><li class="chapter-item expanded "><a href="chapter2/loops.html"><strong aria-hidden="true">2.7.</strong> Loops</a></li><li class="chapter-item expanded "><a href="chapter2/functions.html"><strong aria-hidden="true">2.8.</strong> Functions</a></li><li class="chapter-item expanded "><a href="chapter2/pointers.html"><strong aria-hidden="true">2.9.</strong> Pointers</a></li><li class="chapter-item expanded "><a href="chapter2/memory.html"><strong aria-hidden="true">2.10.</strong> Dynamic Memory</a></li><li class="chapter-item expanded "><a href="chapter2/structs.html"><strong aria-hidden="true">2.11.</strong> Structures</a></li><li class="chapter-item expanded "><a href="chapter2/macros.html"><strong aria-hidden="true">2.12.</strong> Macros &amp; The Preprocessor</a></li><li class="chapter-item expanded "><a href="chapter2/challenges.html"><strong aria-hidden="true">2.13.</strong> Challenges</a></li></ol></li><li class="chapter-item expanded "><a href="chapter3/chapter3.html"><strong aria-hidden="true">3.</strong> M3</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter3/start.html"><strong aria-hidden="true">3.1.</strong> Getting Started</a></li><li class="chapter-item expanded "><a href="chapter3/login.html"><strong aria-hidden="true">3.2.</strong> Logging In</a></li><li class="chapter-item expanded "><a href="chapter3/linux-cmds.html"><strong aria-hidden="true">3.3.</strong> Linux Commands</a></li><li class="chapter-item expanded "><a href="chapter3/shared-fs.html"><strong aria-hidden="true">3.4.</strong> M3's Shared Filesystem</a></li><li class="chapter-item expanded "><a href="chapter3/software-tooling.html"><strong aria-hidden="true">3.5.</strong> Software and Tooling</a></li><li class="chapter-item expanded "><a href="chapter3/bash.html"><strong aria-hidden="true">3.6.</strong> Bash Scripts</a></li><li class="chapter-item expanded "><a href="chapter3/slurm.html"><strong aria-hidden="true">3.7.</strong> Job batching &amp; SLURM</a></li><li class="chapter-item expanded "><a href="chapter3/strudel.html"><strong aria-hidden="true">3.8.</strong> Strudel</a></li><li class="chapter-item expanded "><a href="chapter3/challenges.html"><strong aria-hidden="true">3.9.</strong> Challenges</a></li></ol></li><li class="chapter-item expanded "><a href="chapter4/chapter4.html"><strong aria-hidden="true">4.</strong> Parallel Computing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter4/parallel-computing.html"><strong aria-hidden="true">4.1.</strong> What is Parallel Computing?</a></li><li class="chapter-item expanded "><a href="chapter4/multithreading.html"><strong aria-hidden="true">4.2.</strong> Multithreading</a></li><li class="chapter-item expanded "><a href="chapter4/openmp.html"><strong aria-hidden="true">4.3.</strong> OpenMP</a></li><li class="chapter-item expanded "><a href="chapter4/challenges.html"><strong aria-hidden="true">4.4.</strong> Challenges</a></li></ol></li><li class="chapter-item expanded "><a href="chapter5/chapter5.html"><strong aria-hidden="true">5.</strong> Distributed Computing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter5/parallel-refresher.html"><strong aria-hidden="true">5.1.</strong> Refresher on Parallelism</a></li><li class="chapter-item expanded "><a href="chapter5/distributed-computing.html"><strong aria-hidden="true">5.2.</strong> What is Distributed Computing</a></li><li class="chapter-item expanded "><a href="chapter5/message-passing.html"><strong aria-hidden="true">5.3.</strong> Message Passing</a></li><li class="chapter-item expanded "><a href="chapter5/openmpi.html"><strong aria-hidden="true">5.4.</strong> OpenMPI</a></li><li class="chapter-item expanded "><a href="chapter5/challenges.html"><strong aria-hidden="true">5.5.</strong> Challenges</a></li></ol></li><li class="chapter-item expanded "><a href="acknowledgements.html">Acknowledgements</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">HPC Training</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/MonashDeepNeuron/HPC-Training" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="welcome"><a class="header" href="#welcome">Welcome</a></h1>
<p>Welcome and congratulations on joining the HPC team. This is the HPC Training Book which contains the training material which will be used to train you in many of the preliminary HPC concepts required to participate in the HPC branch and in MDN as a whole. Throughout this book you will learn the basics of the C programming language, parallel and distributed computing and job batching. You will complete challenges across the weeks to test your knowledge and give you the opportunity to practice your skills.</p>
<h2 id="what-is-hpc"><a class="header" href="#what-is-hpc">What is HPC?</a></h2>
<p>HPC stands for high performance computing. In involves using extremely powerful machines to perform complex tasks. It combines aspects of network management, parallel computing techniques and distributed computers to solve highly complex problems. The main focus of HPC is to build and use computer clusters; collections or grids of powerful computers that can communicate information between each other, to solve advanced computational problems that involve a lot of data or process power and time.</p>
<h2 id="hpc-at-monash-deepneuron"><a class="header" href="#hpc-at-monash-deepneuron">HPC at Monash DeepNeuron</a></h2>
<p>The HPC branch at Monash DeepNeuron works on many different projects. Everything from creating mini clusters, to using supercomputer clusters to simulate complex, real world systems for research and technology development in may different scientific disciplines. Within the HPC branch you will learn a lot about HPC development starting with the foundational concepts and ideas involved in HPC to working on various projects that implement and utilise these techniques in order to solve many different complex problems.</p>
<h2 id="hpc-training"><a class="header" href="#hpc-training">HPC Training</a></h2>
<h3 id="what-is-all-this-and-what-is-it-for"><a class="header" href="#what-is-all-this-and-what-is-it-for">What is all this and what is it for?</a></h3>
<p>This is a book. More specifically it is the book containing all the content, training resources and learning materials that you will be using to complete you HPC training. The purpose of this book is to provide clear and concise learning resources that you can utilise effectively; not just in your HPC training, but for the entirety of your time at Monash DeepNeuron.</p>
<h3 id="what-are-you-going-to-learn"><a class="header" href="#what-are-you-going-to-learn">What are you going to learn?</a></h3>
<p>During your HPC training, you are going to learn all about HPC concepts and various tools that exist that allow us to perform HPC development. You will start with the setup process which involves downloading some tools you will be using throughout your training as well as creating a GitHub account. You will then learn about the C programming language and to effectively use it to create powerful and fast computer programs. You will then gain access to M3; Monash's cluster environment, where you will learn hwo to distribute jobs across one or many different computers. You'll also learn about concepts involved in parallel and distributed computing and development programs using these techniques to improve the speed of software applications.</p>
<p>Along the way you will learn how to effectively use developer tools like Git and GitHub as well as solving various challenges each week to test and practice what you have learnt in each chapter.</p>
<h3 id="how-to-use-this-book"><a class="header" href="#how-to-use-this-book">How to use this book</a></h3>
<p>Using the book is pretty self explanatory. The content is split up into chapters which covers a particular topic which can be further broken down sections. You navigate through the book mostly chronologically using the arrow buttons on either side of the page (can't miss them). You can also look through the chapters and sections to find particular topics or using the search bar, which can be activated by pressing <kbd>S</kbd>. Each chapter has a challenges section. These contain various tasks to complete related to the content of each chapter.</p>
<h3 id="contributing"><a class="header" href="#contributing">Contributing</a></h3>
<p>You can contribute to the book by accessing its GitHub repository (GitHub log in the top right hand corner of any page). Follow the contributing guidelines on the repository for more details.</p>
<hr />
<div style="font-size: 0.75em;">
  <center>
    <img src="https://img.shields.io/github/v/release/MonashDeepNeuron/HPC-Training?include_prereleases" alt="Current Release">
  </center>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h1>
<p>In this chapter you'll setup some essential software tools that you will be using throughout your training. Note that some sections are specific to particular platform and devices. Only complete the section that is specific to your platform. The GitHub section you must complete no matter which platform you are on.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="github"><a class="header" href="#github">GitHub</a></h1>
<h2 id="git-what-is-it"><a class="header" href="#git-what-is-it">Git. What is it?</a></h2>
<p>Git is a Source Control Management tool (SCM). It keeps a history of multiple files and directories in a bundle called a repository. Git tracks changes using save points called commits. Commits use <code>.diff</code> files to track the difference in files between commits. Repositories can have multiple branches allow many different developers to create new changes and fixes to a codebase that are separate from each other. You can also switch between branches to work on many different changes at once. These branches can then later be merged back together to a <code>main</code> branch, integrating the various changes.</p>
<h2 id="what-is-github"><a class="header" href="#what-is-github">What is GitHub?</a></h2>
<p>GitHub is a remote Git service. This allows you to store Git repositories online so that individuals and teams can access and work on Git repositories and projects remotely. It offers many features on top of basic version control such as branch, issue and feature tracking, releases, CI/CD pipelines, project management and more. Its predominately used through its website which offers control of these features through a simple GUI. Throughout your time at Monash DeepNeuron, university and probably for the rest of your career (if in a software based role), you will use service like GitHub to help management the development of projects.</p>
<p>Your first task is to sign up for a GitHub account, if you haven't already. I would highly recommend using a personal email address (not a university one) as you will most likely want access to your account after university.</p>
<p><a href="https://github.com/join">GitHub - Join</a></p>
<p>It is also a good idea to install the GitHub mobile app. This allows you track and manage projects and reply to messages and issues from your phone.</p>
<h2 id="joining-monash-deepneurons-github-organisation"><a class="header" href="#joining-monash-deepneurons-github-organisation">Joining Monash DeepNeuron's GitHub Organisation</a></h2>
<p>Once you have signed up for GitHub, you will need to provide your instructors with your GitHub username. This is so we can invite you as a member of the Monash DeepNeuron's organisation on GitHub. This will give you access to projects and allow you to communicate with other members. This will also allow you to gain specific privileges for your future projects at Monash DeepNeuron. You're invitation to the organisation will be sent via the email used for your account.</p>
<h2 id="watching-repositories"><a class="header" href="#watching-repositories">Watching Repositories</a></h2>
<p>GitHub allows you 'watch' repositories. This means you'll be notified of changes to the repository so that you can keep on top of is happening with various projects. You'll be using this later in your training.</p>
<h2 id="download-github-mobile"><a class="header" href="#download-github-mobile">Download GitHub Mobile</a></h2>
<p>We would also request you install the GitHub mobile app. This can make it easier to login to your account (2FA), interact in discussions, reply to mentions and manage repositories and projects when you aren't at your computer.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="windows-setup"><a class="header" href="#windows-setup">Windows Setup</a></h1>
<p>For your training you will need a few tools. Namely:</p>
<ul>
<li>Git</li>
<li>C compiler toolchain (MSVC)</li>
<li>A text editor (VSCode)</li>
</ul>
<h2 id="installing-git"><a class="header" href="#installing-git">Installing Git</a></h2>
<p>First, you will need to install Git. This allows you to use Git from the terminal and also gives you access to a bash shell environment. While following the install wizard, make sure to select the option that adds Git to your <code>PATH</code>. This important as it allows you to use Git in 'PowerShell'. Keep the other default operations. Git may require you to restart you machine.</p>
<p><a href="https://git-scm.com/downloads">Git Download</a></p>
<h3 id="connect-github"><a class="header" href="#connect-github">Connect GitHub</a></h3>
<p>Once Git has installed, open a new 'Git Bash' that was installed. This can be found in the Windows 'Start' menu. Once it is open, run the following commands, replacing the username and email section with your details (keeping the quotation marks).</p>
<pre><code class="language-sh">git config --global user.name &quot;&lt;github-username&gt;&quot;
git config --global user.email &quot;&lt;github-email&gt;&quot;
</code></pre>
<h2 id="installing-msvc"><a class="header" href="#installing-msvc">Installing MSVC</a></h2>
<p>Next we will need to install a C compiler toolchain. There a many different environments such as CygWin, MinGW but the most ideal environment is Microsoft's official development environment, MSVC. Download the Community Edition of Visual Studio and launch the installer. Under the 'Workloads' tab of the installer select the 'C++ Build Tools' bundle and click install. This may take a while. Once installed (may require restart) open the 'Start' menu and navigate to the 'Visual Studio' folder. There should a variety of different terminal environment applications. This is because Windows has slightly different toolchains and environments for x86 (32-bit) and x86_64 (64-bit). Select the 'Developer Command Prompt for VS 2022' app. In the terminal that spawns, run the command.</p>
<pre><code class="language-cmd">cl
</code></pre>
<p>This will display the help options for <code>cl</code>, Window's C compiler.</p>
<p><a href="https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2019">Download MSVC</a></p>
<h2 id="vscode-installation-and-setup"><a class="header" href="#vscode-installation-and-setup">VSCode Installation and Setup</a></h2>
<p>Now that MingW and GCC are installed and setup we will want to setup a text editor so we can easily edit and build our programs. For your training, I recommend using VSCode as it allows you to customize you developer environment to your needs. If you prefer another editor such as Neovim, feel free to use them as you please.</p>
<p>First download VSCode for Windows <a href="https://code.visualstudio.com/download">VSCode Download</a></p>
<p>Once installed, open the app and navigate to the extensions tab (icon on the left size made of four boxes). Using the search bar, install the following extensions.</p>
<ul>
<li>C/C++</li>
<li>GitLens</li>
<li>Git Graph</li>
<li>GitHub Pull Requests and Issues</li>
<li>Sonarlint</li>
</ul>
<p>And thats it, you are all setup.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mac-setup"><a class="header" href="#mac-setup">Mac Setup</a></h1>
<p>For your training you will need a few tools. Namely:</p>
<ul>
<li>Xcode</li>
<li>Git</li>
<li>C compiler toolchain (GCC)</li>
<li>A text editor (VSCode)</li>
</ul>
<h2 id="installing-xcode-git--gcc"><a class="header" href="#installing-xcode-git--gcc">Installing Xcode, Git &amp; GCC</a></h2>
<p>First, we will need Xcode command line tool utilities, to do so, open the 'Terminal' app and run the following command:</p>
<pre><code class="language-sh">xcode-select --install
</code></pre>
<p>This will prompt you to accept the install and will download Git and GCC onto your device. To verify installation was successful, run:</p>
<pre><code class="language-sh">$ xcode-select -p

# Should print this
/Library/Developer/CommandLineTools
</code></pre>
<blockquote>
<p><strong>Note:</strong></p>
<p>Here, <code>$</code> indicates the prompt of the terminal. Do not include it in the command. This may be a different symbol on your device.</p>
</blockquote>
<h2 id="vscode-installation-and-setup-1"><a class="header" href="#vscode-installation-and-setup-1">VSCode Installation and Setup</a></h2>
<p>Now that Homebrew, Xcode and GCC are installed and setup we will want to setup a text editor so we can easily edit and build our programs. For your training, I recommend using VSCode as it allows you to customize you developer environment to your needs. If you prefer another editor such as Neovim, feel free to use them as you please.</p>
<p>First download VSCode for Mac <a href="https://code.visualstudio.com/download">VSCode Download</a></p>
<p>Once installed, open the app and navigate to the extensions tab (icon on the left size made of four boxes). Using the search bar, install the following extensions.</p>
<ul>
<li>C/C++</li>
<li>GitLens</li>
<li>Git Graph</li>
<li>GitHub Pull Requests and Issues</li>
<li>Sonarlint</li>
</ul>
<p>And thats it, you are all setup.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="linux-setup"><a class="header" href="#linux-setup">Linux Setup</a></h1>
<p>For your training you will need a few tools. Namely:</p>
<ul>
<li>Git</li>
<li>C compiler toolchain (GCC)</li>
<li>A text editor (VSCode)</li>
</ul>
<p>For this section I will be assuming a Debian system, namely Ubuntu. Replace <code>apt</code> commands with your distributions relevant package manager.</p>
<h2 id="installing-packages"><a class="header" href="#installing-packages">Installing Packages</a></h2>
<p>To begin, you will need to install some packages. This will be done using <code>apt</code>, Ubuntu's system package manager. Run the commands in the shell.</p>
<pre><code class="language-sh"># `sudo` represents 'super user do'.
 
# This runs a command with admin. privileges.
# Update apt's local package index.
sudo apt update

# The `-y` flag means upgrade yes to all.
# This bypasses confirming package upgrades.
# Upgrade packages with new versions
sudo apt upgrade -y

# Installs specified packages (separated by spaces).
sudo apt install git curl wget build-essential
</code></pre>
<p>And that's it. Linux is setup and installed.</p>
<h2 id="connect-git--github"><a class="header" href="#connect-git--github">Connect Git &amp; GitHub</a></h2>
<p>Next we will link your GitHub account to you local Git install. Run the following commands, replacing the username and email section with your details (keeping the quotation marks).</p>
<pre><code class="language-sh">git config --global user.name &quot;&lt;github-username&gt;&quot;
git config --global user.email &quot;&lt;github-email&gt;&quot;
</code></pre>
<h2 id="vscode-installation-and-setup-2"><a class="header" href="#vscode-installation-and-setup-2">VSCode Installation and Setup</a></h2>
<p>Now that GCC is installed and setup we will want to setup a text editor so we can easily edit and build our programs. For your training, I recommend using VSCode as it allows you to customize you developer environment to your needs. If you prefer another editor such as Vim, Emacs or Neovim, feel free to use them as you please.</p>
<p>First download VSCode for Linux <a href="https://code.visualstudio.com/download">VSCode Download</a></p>
<p>Once installed, open the app and navigate to the extensions tab (icon on the left size made of four boxes). Using the search bar, install the following extensions.</p>
<ul>
<li>C/C++</li>
<li>GitLens</li>
<li>Git Graph</li>
<li>GitHub Pull Requests and Issues</li>
<li>Sonarlint</li>
</ul>
<p>And thats it, you are all setup.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wsl-setup"><a class="header" href="#wsl-setup">WSL Setup</a></h1>
<p>For your training you will need a few tools. Namely:</p>
<ul>
<li>Windows Terminal</li>
<li>Windows Subsystem for Linux</li>
<li>Installing Ubuntu</li>
<li>Git</li>
<li>C compiler toolchain (GCC)</li>
<li>A text editor (VSCode)</li>
</ul>
<p>This section will cover how to install WSL on Windows. If you already have a WSL setup you can skip these steps.</p>
<h2 id="installing-windows-terminal"><a class="header" href="#installing-windows-terminal">Installing Windows Terminal</a></h2>
<p>The first thing you will need is the new Windows Terminal app. This makes it easier to have multiple shells open, even different shells. This will be used to access your WSL instance.</p>
<p><a href="https://apps.microsoft.com/store/detail/windows-terminal/9N0DX20HK701">Windows Terminal Download</a></p>
<blockquote>
<p><strong>Note:</strong></p>
<p>Shells are an environments that allow access to the operating system (OS), hardware and other system processes through simple shell commands, usually a shell language like Bash or Powershell.</p>
</blockquote>
<h2 id="installing-and-setting-up-wsl"><a class="header" href="#installing-and-setting-up-wsl">Installing and Setting Up WSL</a></h2>
<p>Before you begin make sure to update Windows to make sure you have the latest version. You will then need to check in order to see if you can install WSL is if virtualization is enabled for your device. You can check this by opening 'Task Manager', clicking on the performance tab and looking at the CPU details. There will be an option called 'Virtualization' which should say 'Enabled'.</p>
<p><img src="chapter1/taskmanager.png" alt="Task Manager Image" /></p>
<p>Next, open Powershell with Administrative Privileges and run the following command.</p>
<pre><code class="language-ps">wsl --install -d Ubuntu-22.04
</code></pre>
<p>Once this has finished, you may need to restart your machine. With that WSL is installed. You should be able to open a Ubuntu shell using Windows Terminal by clicking the arrow icon next to the default tab and selecting Ubuntu. On your first launch, this may require you to setup your user credentials.</p>
<h2 id="installing-packages-1"><a class="header" href="#installing-packages-1">Installing Packages</a></h2>
<p>To begin, you will need to install some packages. This will be done using <code>apt</code>, Ubuntu's system package manager. Run the commands in the shell.</p>
<pre><code class="language-sh"># `sudo` represents 'super user do'.
 
# This runs a command with admin. privileges.
# Update apt's local package index.
sudo apt update

# The `-y` flag means upgrade yes to all.
# This bypasses confirming package upgrades.
# Upgrade packages with new versions
sudo apt upgrade -y

# Installs specified packages (separated by spaces).
sudo apt install git curl wget ca-certificates build-essential
</code></pre>
<p>And that's it. WSL is setup and installed.</p>
<h2 id="connect-git--github-1"><a class="header" href="#connect-git--github-1">Connect Git &amp; GitHub</a></h2>
<p>Next we will link your GitHub account to you local Git install. Run the following commands, replacing the username and email section with your details (keeping the quotation marks).</p>
<pre><code class="language-sh">git config --global user.name &quot;&lt;github-username&gt;&quot;
git config --global user.email &quot;&lt;github-email&gt;&quot;
</code></pre>
<h2 id="vscode-installation-and-setup-3"><a class="header" href="#vscode-installation-and-setup-3">VSCode Installation and Setup</a></h2>
<p>Now that WSL, Ubuntu and Git are installed and setup we will want to setup a text editor so we can easily edit and build our programs. For usage with WSL ans your training in general I recommend using VSCode as it allows you to customize you developer environment to your needs. It also can access the WSL filesystem allowing you to work on projects in a native Linux environment on Windows. If you prefer another editor such as Vim, Emacs or Neovim, feel free to use them as you please.</p>
<p>First download VSCode for Windows <a href="https://code.visualstudio.com/download">VSCode Download</a></p>
<p>Once installed, open the app (on the Windows side) and navigate to the extensions tab (icon on the left size made of four boxes). Using the search bar, install the following extensions.</p>
<ul>
<li>C/C++</li>
<li>GitLens</li>
<li>Git Graph</li>
<li>GitHub Pull Requests and Issues</li>
<li>Sonarlint</li>
<li>Remote development</li>
<li>WSL</li>
<li>Remote SSH</li>
</ul>
<p>You can then navigate to the window with the Ubuntu shell from before and run:</p>
<pre><code class="language-sh">code .
</code></pre>
<p>This will installed VSCode on the WSL from your Windows version and open it in the home directory. And thats it, you are all setup.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="challenges"><a class="header" href="#challenges">Challenges</a></h1>
<p>As you progress through each chapter you will be given a small set of challenges to complete. In order to complete the challenges there is a complementary GitHub template repository found on the Monash DeepNeuron GitHub organisation called <a href="https://github.com/MonashDeepNeuron/HPC-Training-Challenges">HPC Training Challenges</a>. As a template you are able to create your own copy of the repository and complete the challenges completely independent of the other recruits.</p>
<h2 id="setting-up-challenges-repository"><a class="header" href="#setting-up-challenges-repository">Setting Up Challenges Repository</a></h2>
<p>To get setup:</p>
<ul>
<li>Click the link above to go to the repository on GitHub.</li>
<li>Click 'Use this template' button (green) and select 'Create a new repository'.</li>
<li>Give it a name and make sure it is private.</li>
<li>Ensure you are copying it to your personal account and not the Monash DeepNeuron organisation. There will be a dropdown next to where you give the repo a name from which you can select your account.</li>
<li>Click 'Create repository from template'.</li>
<li>This will open the page for the repository. Click the '&lt;&gt; Code' button (green), make sure you are in the HTTPS tab and copy the link.</li>
<li>Open a terminal in your dev directory.</li>
<li>Run:</li>
</ul>
<pre><code class="language-sh"># Clone to your machine
git clone &lt;repo-link&gt;

# Enter clone's directory
cd &lt;repo-name&gt;

# Create link to template called 'upstream' 
git remote add upstream https://github.com/MonashDeepNeuron/HPC-Training-Challenges.git

# Disable pushing to template
git remote set-url --push upstream DISABLE

# Sync with 'upstream'
git fetch upstream

# Merge 'upstream' main branch with your main
git merge upstream/main --allow-unrelated-histories

# Open repository in VSCode
code .
</code></pre>
<p>This will clone the repository into you current working directory maintaining its link to its <code>origin</code> (your remote copy on GitHub) allowing you to sync changes between you local and remote copies. This also sets up a link called <code>upstream</code> to the original template directory with pushing disabled. This allows you to sync the base of the repository with your copy, similar to a fork but prevents changes from being pushed to the template.</p>
<p>Once you completed a challenge or made some changes you want to save to your remote repository you can simply add to a commit stage, combine the changes in a commit and then push the commit to <code>origin</code>.</p>
<pre><code class="language-sh">git add .               # Add any untracked or modified files
git commit -m &quot;msg&quot;     # Commit changes locally with a message
git push origin         # Push to your GitHub repository
</code></pre>
<p>If you need to sync your local repository with the remote version you can either fetch the changes to add them to the logs without modifying the codebase or pull them to integrate the changes into your version.</p>
<pre><code class="language-sh">git fetch origin    # Sync changes with remote without integrating (downloading) them
git pull origin     # Sync and integrate remote changes locally
</code></pre>
<p>In order to sync your copy of the challenges repository with the remote template you must re-fetch the changes from <code>upstream</code> and then merge the <code>upstream</code> remote with your local repository.</p>
<pre><code class="language-sh">git merge upstream/main --allow-unrelated-histories
</code></pre>
<blockquote>
<p>Note: Look at the README.md of the repo for the for more instructions.</p>
</blockquote>
<h2 id="challenges-repository"><a class="header" href="#challenges-repository">Challenges Repository</a></h2>
<p>The challenges repository is broken down into different directories for each chapter. For each chapter their will be a series of additional directories corresponding to the specific challenge. These will contain any and all the resources needed for the challenge except programs that you are required to complete.</p>
<p>When you want to attempt a challenge it is good practice to create a branch. This allows you to make changes to the codebase that do not affect other branches each with their own history. You can then later merge branches to integrate changes together. To create a new branch you can use the <code>git-branch</code> command or the the <code>-b</code> flag with the <code>git-checkout</code> command giving both the name of the new branch. This will branch from your current position in the repositories history. Switching branches is achieved using the <code>git-checkout</code> command (with no <code>-b</code> flag). You use the regular <code>git-add</code>, <code>git-commit</code> and <code>git-push</code> commands interact and save the changes that only affect this new branch.</p>
<pre><code class="language-sh">git branch &lt;branch-name&gt;        # Create new branch
git checkout &lt;branch-name&gt;      # Checkout to the new branch
# or
git checkout -b &lt;branch-name&gt;   # Checkout to a new branch
</code></pre>
<p>For your training. I would recommend creating a new branch for every challenge you attempt and merging them with the <code>main</code> (default) branch once you are done. This allows you to make modifications to each of your attempts independent of each other as well as make it easier to resync with the template repository should anything change at its base. it also allows you to get some meaningful practice with Git which is one of the most used developer tools in the world.</p>
<p>When you want to merge your changes, checkout back to the <code>main</code> branch and run a merge request. This will pull the changes from the deviating branch into main and update it accordingly.</p>
<pre><code class="language-sh"># On your deviant branch
git fetch origin
git checkout main
git fetch origin
git merge &lt;branch-name&gt;
</code></pre>
<blockquote>
<p>Note: Merging sometimes creates merge conflicts. This happens when the two branches histories cannot automatically merge. Git has many tools to assist resolving these conflicts and there is a plethora of resources online to assist you. If you get stuck do not hesitate to reach out.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="brief-introduction-to-c"><a class="header" href="#brief-introduction-to-c">Brief Introduction to C</a></h1>
<h2 id="what-is-c"><a class="header" href="#what-is-c">What is C?</a></h2>
<p>What is C? You may have heard of a something called C in your classes or online but may be unaware of what it is and what it is used for. Simply put C is a general purpose programming language developed at Bell Labs in 1972 by Dennis Ritchie. It was designed to closely reflect the architecture and capabilities of the target device. It was popularized in large part due to its usage and role in the UNIX operating system. Before languages like C, developers and engineers had to mostly use assembly languages; the instruction code that was specific to every single device (CPU in particular), meaning an application for one device would have to be rewritten in the new devices assembly language. C aimed to make this easier, creating a unified language that could then be compiled to any target architecture. The 'write once, compile everywhere' philosophy. This dramatically increased the capabilities of developers to create portable applications that were also easier to write.</p>
<h2 id="design"><a class="header" href="#design">Design</a></h2>
<p>C is a very simple programming language. It has relatively minimal syntax, a small standard library and only a few primitive data types and entities. C's power comes from its simplicity, it allows developers to utilise any and all components of a computer in any way the developer sees fit. This is because C is still able to target various system-level operations such as allocate memory and make system calls. This capability is derive from C originating as the language that was used to create the UNIX operating system, the predecessor of Linux and MacOS. C and UNIX were  developed simultaneously meaning any operation they needed UNIX to perform had to be accessible from C. C also has a very simple memory model that closely reflects how computer memory is designed today which follows Alan Turing's original description of a Turing machine ie. memory is an infinitely (not truly infinite, but for arguments sake) long tape of individually addressable cells.</p>
<h2 id="technical-description"><a class="header" href="#technical-description">Technical Description</a></h2>
<p>C is a static and weakly typed language. What are types? Types are in essence a form of structure, typically dictated by their layout ie. their size in memory. Every language has type system which dictates the operations that can be performed on a particular types and the semantics for when these operations can occur. A statically typed language means that the compiler must know the type of every piece of data in a program. This is because data has a fixed width in C meaning any program written in C must have a known size such that the it can actually run on a machine. Weakly typed describes a language for which data types are allowed to have implicit conversions. This means that you can utilise the same data but in a different shape. This is sometimes useful but more often is a pitfall to the language.</p>
<h2 id="family-history"><a class="header" href="#family-history">Family History</a></h2>
<p>While many people will talk about the C family of languages, many of the execution techniques used in C were inspired by another language called ALGOL developed in the late 50's. Many of the principles in ALGOL were using in C. See is also the successor to the B programming language (also developed at Bell Labs by Ken Thompson and Dennis Ritchie). C has inspired almost every procedural language used today and has had a massive influence on other language families. Some of the descendants of the C language include C++, Swift, JavaScript, PHP, Rust, HolyC, Java, Go, C#, Perl and (depending who you ask) Python.</p>
<h3 id="entire-mostly-programming-language-lineage"><a class="header" href="#entire-mostly-programming-language-lineage">Entire (mostly) Programming Language Lineage</a></h3>
<p><img src="chapter2/imgs/lang-family-tree.png" alt="Programming Language Family Tree" /></p>
<ul>
<li>Source <a href="http://rigaux.org/language-study/diagram.html">rigaux.org</a></li>
</ul>
<h3 id="simplified-programming-language-lineage"><a class="header" href="#simplified-programming-language-lineage">Simplified Programming Language Lineage</a></h3>
<p><img src="chapter2/imgs/lang-family-tree-light.png" alt="Simplified Programming Language Family Tree" /></p>
<ul>
<li>Source <a href="http://rigaux.org/language-study/diagram.html">rigaux.org</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hello-world"><a class="header" href="#hello-world">Hello World</a></h1>
<p>If you have ever programmed before you may be familiar with 'Hello World'. If not, a 'Hello World' program is often the first program you write in a programming language. It serves a brief introduction to the languages syntax, a simple workflow in that language and also as a sanity check to ensure the developer tools for the project were installed and setup correctly.</p>
<blockquote>
<p><strong>Fun Fact:</strong></p>
<p>The 'Hello World' test program was popularized by Brian Kernighan's <em>Programming in C: A Tutorial</em>.</p>
</blockquote>
<h2 id="setup"><a class="header" href="#setup">Setup</a></h2>
<p>To begin open a new terminal window. If you don't already have a development directory it is a good idea to create one. This should be where you host all your projects. </p>
<pre><code class="language-sh"># Optional
mkdir dev
cd dev
</code></pre>
<p>In this directory (or another of your choosing) we are going to create a directory for our 'Hello World' project. Finally, we'll open VSCode in this location so that we can easily edit our code.</p>
<pre><code class="language-sh">mkdir hello
cd hello
code . 
</code></pre>
<blockquote>
<p><strong>Note:</strong></p>
<p>Windows users will have to use the Developer Command Prompt used in the Windows section of the last chapter. You will then need to navigate to a different directory. Ideally use your 'Home' directory.</p>
<pre><code class="language-cmd">cd C:\Users\&lt;username&gt;
</code></pre>
<p>You should be able to follow the instructions above normally.</p>
</blockquote>
<h2 id="compiling-and-running"><a class="header" href="#compiling-and-running">Compiling and Running</a></h2>
<p>'Hello World' in C is quite simple, although not as simple as say Python. First create a new file called <code>main.c</code>.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    puts(&quot;Hello World\n&quot;);
    return 0;
}
</code></pre>
<p>To compile and run the program simply run the commands below. The output will be an executable called <code>main</code> (<code>main.exe</code> on Windows) located in the same directory as the source file.</p>
<h3 id="linux-macos--wsl"><a class="header" href="#linux-macos--wsl">Linux, MacOS &amp; WSL</a></h3>
<pre><code class="language-sh">gcc -o main main.c
./main
Hello World
</code></pre>
<h3 id="windows"><a class="header" href="#windows">Windows</a></h3>
<pre><code class="language-sh">cl main.c
main.exe

# ...

Hello World
</code></pre>
<h2 id="whats-going-on-here"><a class="header" href="#whats-going-on-here">What's Going On Here?</a></h2>
<p>Let's break down the 'Hello World' program a bit to see what is going on.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
</code></pre>
<p>On the first line we have we have included a library. This is the Standard IO library. Libraries come in the form of one or more headers, denoted by the <code>*.h</code> file extension. More on headers in the next section. The <code>#include</code> is called a preprocessor directive. It is resolved at compile time meaning it does not exist at runtime. Here <code>#include</code> will copy (yes, literally copy) the entire contents of the file specified. In this case, it is the file <code>stdio.h</code>. This means that the symbols from this header are now available in our program.</p>
<pre><code class="language-c">int main()
{
    /// ...

    return 0;
}
</code></pre>
<p><code>main()</code> is a function. Functions are subroutines that allow us to run a piece of code many time without repeating it everywhere we need it. In C, the <code>main()</code> function has a special meaning, it is the entry point of the application. After some initial setup from the OS, this is first section of the application to run. Here <code>main()</code> takes no arguments however, sometimes it will take two special arguments which are used to communicate information from the outside world to the program at the point of execution. Here, we indicate <code>main()</code> returns an <code>int</code>. The return value is used by the OS to handle specific errors that may occur. A return value of <code>0</code> from main indicate success with any non-zero value indicating an error.</p>
<pre><code class="language-c">puts(&quot;Hello World!&quot;);
</code></pre>
<p><code>puts()</code> is another function. It was obtained from the <code>stdio</code> library we included before. <code>puts()</code> means 'put string'. It takes a null-terminating string as input and returns the op-code indicating success or failure. As a side effect,<code>puts()</code> writes the string to the <code>stdout</code> file-stream ie. outputs the string to the terminal and appends a newline character at the end. Both the call to <code>puts()</code> and <code>return</code> end in a semicolon. This indicates the end of the line/expression and is required for almost every line of C.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="compilation"><a class="header" href="#compilation">Compilation</a></h1>
<p>C is a compiled language. This means that all the source code is compiled to machine code before the application is run. This means that the compiler needs to know a lot about a program before it can run. Compilation is the process of combining source files into a single binary and because C is a structured language, the order in which files are compiled is important. C also sometimes requires files to be linked together. This occurs when two source files depend on a common library source file.</p>
<h2 id="header--source-files"><a class="header" href="#header--source-files">Header &amp; Source Files</a></h2>
<p>In C there are two kinds of files that are used. Source files and header files. These must be combined appropriately by the compiler in order to produce a working executable.</p>
<h3 id="header-file"><a class="header" href="#header-file">Header File</a></h3>
<p>Headers are declaration files. They define and state that certain symbols (functions, types etc.) exist such that other headers and source files can use them without knowing there full definition (how they work) yet. Within a header, you define what is called the signature of a function or type. This allows the C type system to validate the uses of the symbol before it even compiles the symbol. Headers in C use the <code>*.h</code> file extension.</p>
<h3 id="source-files"><a class="header" href="#source-files">Source Files</a></h3>
<p>Source files are the core of any language. They hold the definition of every symbol defined in a codebase. Source files for C use the <code>*.c</code> file extension. Source files are what actually get compiled binary machine code. Source files are often compiled into object files first and then linked together using a linker when they depend on each other or external libraries.</p>
<h2 id="compiling--linking"><a class="header" href="#compiling--linking">Compiling &amp; Linking</a></h2>
<p>There are four main steps in the compilation pipeline for C programs.</p>
<ol>
<li>Pre-process - The Preprocessor is invoked, which includes headers in source files and expands macros. Comments are also stripped at this step. The step creates the Translation Unit (TU) for a source file.</li>
<li>Compilation - The TU's for each source file is then compiled individually into assembly code. During this step the Abstract Syntax Tree is created for the program and is lower to an Higher Intermediate Representation (HIR). Generally this is created in assembly language of the target platform/CPU.</li>
<li>Assembly - This step involves lowering the HIR once again into an Intermediate Representation (IR) ie. it assembles the assembly code into an binary object file.</li>
<li>Linking - This is the final step. Once objects files are created for each TU, we can link them together as well as link any external libraries to form an executable (or binary library file). Linking provides information to an executable about to file the definition of symbols at runtime so that functions will actually execute the correct code. Before this step, the object files just new that certain symbols existed but not where to find them.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="types--variables"><a class="header" href="#types--variables">Types &amp; Variables</a></h1>
<h2 id="fundamental-data-types"><a class="header" href="#fundamental-data-types">Fundamental Data Types</a></h2>
<p>In C there are six fundamental data types, <code>bool</code>, <code>char</code>, <code>int</code>, <code>float</code>, <code>double</code> and <code>void</code>. There are also a variety of modified integral and floating point types to allow for different sizes.</p>
<ul>
<li><code>bool</code> - Boolean type, can either be <code>true</code> or <code>false</code>. It's width is 8-bits (1 byte).</li>
<li><code>char</code> - Character type. Can be unsigned or signed. Represents any ASCII character value. Usually has a width of 8-bits (1 byte).</li>
<li><code>short int</code> or <code>short</code> - Number type, can be signed or unsigned. Only represents whole number values. Usually has a width of 16-bits (2 bytes).</li>
<li><code>int</code> - Number type, can be signed or unsigned. Only represents whole number values. Usually has a width of 32-bits (4 bytes).</li>
<li><code>long int</code> or <code>long</code> - Number type, can be signed or unsigned. Only represents whole number values. Sometimes has a width of 32-bits (4 bytes) or 64-bits (8 bytes).</li>
<li><code>long long int</code> or <code>long long</code> - Number type, can be signed or unsigned. Only represents whole number values. Has a width of 64-bits (8 bytes).</li>
<li><code>float</code> - Single precision floating point type, represents decimal number values. Usually has a width of 32-bits (4 bytes).</li>
<li><code>double</code> - Double precision floating point type, represents decimal number values. Usually has a width of 64-bits (8 bytes).</li>
<li><code>long double</code> - Extended double precision (or quadruple precision) floating point type, represents decimal number values. Usually has a width of at least 64-bits (8 bytes) but sometimes has a width of 128-bits (16 bytes).</li>
<li><code>void</code> - Incomplete data type. Indicates the absence of a type of value.</li>
</ul>
<blockquote>
<p><strong>Note:</strong> <code>bool</code>, <code>char</code> and <code>int</code> (and sized variants) are defined as integral types ie. they are all number types.</p>
</blockquote>
<h2 id="variables"><a class="header" href="#variables">Variables</a></h2>
<p>Variables are integral to computer programming. Variables are objects that own a piece of data. What data or rather value of a variable can change throughout the lifetime of a program. To declare a variable in C, we first declare its type. The type predicates which operations are valid for that variable as well as tells the compiler the size of the variable. We then git it a name and assign it an initial value.</p>
<pre><code class="language-c">/// General syntax: type name = value

int a = 10;
</code></pre>
<p>In C variables have 'value semantics', this means that the data of a variable is always copied. For the example above, the data representing the literal <code>10</code> is copied into the location of <code>a</code> by the assignment operator (<code>=</code>).</p>
<blockquote>
<p><strong>Note:</strong> Often the compiler will likely try to construct variables (like <code>a</code>) directly to the evaluated value of the right-hand-side of the <code>=</code> ie. construct <code>a</code> directly from <code>10</code> rather than create <code>a</code> with a dummy value and then copy <code>10</code> to <code>a</code>'s location. This is called copy elision or return value optimization.</p>
</blockquote>
<p>You can also create new variables and initialize them to the value of an existing variables using the same syntax. Because C uses value semantics, <code>b</code> now has its own copy of the data owned by <code>a</code>. These can now be modified independently of each other.</p>
<pre><code class="language-c">int a = 10;
int b = a;
</code></pre>
<blockquote>
<p><strong>Note:</strong></p>
<ul>
<li>Literals are data with a constant value that are predefined. They are often used to initialise variables to a particular starting value.</li>
<li>A <code>char</code> literal is a single letter surrounded in single quotes eg. <code>'a'</code> is a literal for the letter 'a'.</li>
</ul>
</blockquote>
<h3 id="constant-data"><a class="header" href="#constant-data">Constant Data</a></h3>
<p>Sometimes you want data to be constant or immutable. This is data that does not and cannot change during its lifetime. To do this in C we use the <code>const</code> qualifier before the type of a variable. This marks some variable as constant. Constant data must be given an initialiser or the program will not compile. <code>const</code> can be applied to any variable of any type but a constant variable cannot be modified to be mutable however, you can create a copy of a constant variable that is mutable.</p>
<pre><code class="language-c">const int a = 4;
</code></pre>
<h3 id="static-data"><a class="header" href="#static-data">Static Data</a></h3>
<p>In C you can also allows you to create data that will exist for the entire lifetime of the program and is declared with the <code>static</code> keyword before the type initialiser. This kind of data is said to have static storage duration which means that it remains 'alive' or valid for the entire duration of the program and will not automatically get cleaned up when the it has left scope. This has some interesting implications but the most useful is its usage in function blocks. Static variables allow data to persist between function calls, meaning that if you invoke a function that owns a static variable; say an <code>int</code>, was left with the value <code>9</code> once the called had completed, if you were to recall the function and inspect the value the static variable it would still contain the value <code>9</code> at the start of the call. This allows you to keep data between function calls.</p>
<pre><code class="language-c">static int a = 9;
</code></pre>
<p>There are other more advanced usages of <code>static</code> that allow you to control the linkage of different translation units (source and object files) but they are beyond the scope of this book.</p>
<h2 id="operators"><a class="header" href="#operators">Operators</a></h2>
<p>Operators are the most primitive way to manipulate data and variables in C. There are four major categories for operators these being arithmetic, bitwise, logical and assignment. Each operator is written in either infix (binary), prefix or prefix (unary) form. Most operators return the result of their evaluation meaning it can can be assigned to a new variable however, some modify the data in-place, this includes all assignment operators and the increment and decrement operators (which do both).</p>
<blockquote>
<p><strong>Note:</strong> Parenthesis are used to control the order of execution, separating sub-expressions.</p>
</blockquote>
<h3 id="arithmetic-operators"><a class="header" href="#arithmetic-operators">Arithmetic Operators</a></h3>
<p>Arithmetic operators work for integral and floating point type. They are the most common type of operator used in C.</p>
<table><thead><tr><th align="center">Operator</th><th align="center">Name</th><th align="center">Description</th><th align="center">Example</th></tr></thead><tbody>
<tr><td align="center"><code>+</code></td><td align="center">Addition</td><td align="center">Adds two values</td><td align="center"><code>a + b</code></td></tr>
<tr><td align="center"><code>-</code></td><td align="center">Subtraction</td><td align="center">Subtracts two values</td><td align="center"><code>a - b</code></td></tr>
<tr><td align="center"><code>*</code></td><td align="center">Multiplication</td><td align="center">Multiplies two values</td><td align="center"><code>a * b</code></td></tr>
<tr><td align="center"><code>/</code></td><td align="center">Division</td><td align="center">Divides two values</td><td align="center"><code>a / b</code></td></tr>
<tr><td align="center"><code>%</code></td><td align="center">Modulo Division</td><td align="center">Modulo divides two values ie. returns the remainder of the division of two numbers</td><td align="center"><code>a % b</code></td></tr>
<tr><td align="center"><code>++</code></td><td align="center">Prefix Increment</td><td align="center">Increment the value in-place and return new value</td><td align="center"><code>++a</code></td></tr>
<tr><td align="center"><code>--</code></td><td align="center">Prefix Decrement</td><td align="center">Decrement the value in-place and return new value</td><td align="center"><code>--a</code></td></tr>
<tr><td align="center"><code>++</code></td><td align="center">Postfix Increment</td><td align="center">Increment the value in-place and return old value</td><td align="center"><code>a++</code></td></tr>
<tr><td align="center"><code>--</code></td><td align="center">Postfix Decrement</td><td align="center">Decrement the value in-place and return old value</td><td align="center"><code>a--</code></td></tr>
<tr><td align="center"><code>+</code></td><td align="center">Posigation</td><td align="center">Set sign of value to positive</td><td align="center"><code>+a</code></td></tr>
<tr><td align="center"><code>-</code></td><td align="center">Negation</td><td align="center">Set sign of value to negative</td><td align="center"><code>-a</code></td></tr>
</tbody></table>
<blockquote>
<p><strong>Notes:</strong></p>
<ul>
<li>Binary arithmetic operators will a return value whose type is the larger of <code>a</code> or <code>b</code>.</li>
<li>If <code>a</code> or <code>b</code> is smaller than its counterpart, the smaller will be implicitly promoted to a larger type.</li>
<li>Division between two integral types performs integer division.</li>
<li>Division between a floating point type and any other type (integral or floating point) performs floating point division by implicitly promoting the integral or smaller argument to an adequate type or size.</li>
<li>Modulo division does not exist for floating point types.</li>
</ul>
</blockquote>
<h3 id="bitwise-operators"><a class="header" href="#bitwise-operators">Bitwise Operators</a></h3>
<p>Bitwise operators are used to manipulate the individual bits of an integral type allowing precise control of the most fundamental data type.</p>
<table><thead><tr><th align="center">Operator</th><th align="center">Name</th><th align="center">Description</th><th align="center">Example</th></tr></thead><tbody>
<tr><td align="center"><code>~</code></td><td align="center">Complement</td><td align="center">Inverts the bits of a values</td><td align="center"><code>~a</code></td></tr>
<tr><td align="center"><code>&amp;</code></td><td align="center">And</td><td align="center">Ands the bits of two values</td><td align="center"><code>a &amp; b</code></td></tr>
<tr><td align="center"><code>|</code></td><td align="center">Or</td><td align="center">Ors the bits of two values</td><td align="center"><code>a | b</code></td></tr>
<tr><td align="center"><code>^</code></td><td align="center">Exclusive Or (Xor)</td><td align="center">Xors the bits of two values</td><td align="center"><code>a ^ b</code></td></tr>
<tr><td align="center"><code>&lt;&lt;</code></td><td align="center">Left Shift</td><td align="center">Shifts the bits of <code>a</code> to the left by <code>b</code> positions.</td><td align="center"><code>a &lt;&lt; b</code></td></tr>
<tr><td align="center"><code>&gt;&gt;</code></td><td align="center">Right Shift</td><td align="center">Shifts the bits of <code>a</code> to the right by <code>b</code> positions.</td><td align="center"><code>a &gt;&gt; b</code></td></tr>
</tbody></table>
<blockquote>
<p><strong>Note:</strong></p>
<ul>
<li>Bitwise operators do not exist for floating point types.</li>
<li>Bits are lost from shift operators.</li>
<li>Left shift (<code>&lt;&lt;</code>) pads with zeros ie. adds a zero in the new empty position.</li>
<li>Right shift (<code>&gt;&gt;</code>) pads with the most significant bit ie. the new empty position is filled with the same value as the previous occupant.</li>
<li>Left and right shifts are formally described respectively as: \(a &lt;&lt; b ≡ a * 2^{b} mod(2^{N})\) and \(a &gt;&gt; b ≡ \frac{a}{2^{b}} mod(2^{N})\) where \(N\) is the numbers bits in the resulting value.</li>
</ul>
</blockquote>
<h3 id="logical-operators"><a class="header" href="#logical-operators">Logical Operators</a></h3>
<p>Logical operators operate on Boolean expressions statements. They only evaluate to another Boolean expression (ie. type <code>bool</code>).</p>
<table><thead><tr><th align="center">Operator</th><th align="center">Name</th><th align="center">Description</th><th align="center">Example</th></tr></thead><tbody>
<tr><td align="center"><code>!</code></td><td align="center">Not</td><td align="center">Negates the Boolean.</td><td align="center"><code>!a</code></td></tr>
<tr><td align="center"><code>&amp;&amp;</code></td><td align="center">Logical And</td><td align="center">Both <code>a</code> and <code>b</code> must be true.</td><td align="center"><code>a &amp;&amp; b</code></td></tr>
<tr><td align="center"><code>||</code></td><td align="center">Logical Or</td><td align="center">Either <code>a</code> or <code>b</code> must be true.</td><td align="center"><code>a || b</code></td></tr>
<tr><td align="center"><code>==</code></td><td align="center">Equals</td><td align="center"><code>a</code> is equal to <code>b</code>.</td><td align="center"><code>a == b</code></td></tr>
<tr><td align="center"><code>!=</code></td><td align="center">Not Equal</td><td align="center"><code>a</code> is not equal to <code>b</code>.</td><td align="center"><code>a != b</code></td></tr>
<tr><td align="center"><code>&lt;</code></td><td align="center">Less</td><td align="center"><code>a</code> is less than <code>b</code>.</td><td align="center"><code>a &lt; b</code></td></tr>
<tr><td align="center"><code>&gt;</code></td><td align="center">Greater</td><td align="center"><code>a</code> is greater than <code>b</code>.</td><td align="center"><code>a &gt; b</code></td></tr>
<tr><td align="center"><code>&lt;=</code></td><td align="center">Less than or equal</td><td align="center"><code>a</code> is less than or equal to <code>b</code>.</td><td align="center"><code>a &lt;= b</code></td></tr>
<tr><td align="center"><code>&gt;=</code></td><td align="center">Greater than or equal</td><td align="center"><code>a</code> is greater than or equal to <code>b</code>.</td><td align="center"><code>a &gt;= b</code></td></tr>
</tbody></table>
<h3 id="assignment-operators"><a class="header" href="#assignment-operators">Assignment Operators</a></h3>
<p>Assignment operators will perform a binary operation between two values and assign the result to the left argument (excluding <code>=</code>).</p>
<table><thead><tr><th align="center">Operator</th><th align="center">Name</th><th align="center">Description</th><th align="center">Example</th></tr></thead><tbody>
<tr><td align="center"><code>=</code></td><td align="center">Assign</td><td align="center">Assigns the value of <code>b</code> to <code>a</code></td><td align="center"><code>a = b</code></td></tr>
<tr><td align="center"><code>+=</code></td><td align="center">Add Assign</td><td align="center">Assigns the value of <code>a + b</code> to <code>a</code></td><td align="center"><code>a += b</code></td></tr>
<tr><td align="center"><code>-=</code></td><td align="center">Subtract Assign</td><td align="center">Assigns the value of <code>a - b</code> to <code>a</code></td><td align="center"><code>a -= b</code></td></tr>
<tr><td align="center"><code>*=</code></td><td align="center">Multiply Assign</td><td align="center">Assigns the value of <code>a * b</code> to <code>a</code></td><td align="center"><code>a *= b</code></td></tr>
<tr><td align="center"><code>/=</code></td><td align="center">Divide Assign</td><td align="center">Assigns the value of <code>a / b</code> to <code>a</code></td><td align="center"><code>a /= b</code></td></tr>
<tr><td align="center"><code>%=</code></td><td align="center">Modulo Divide Assign</td><td align="center">Assigns the value of <code>a % b</code> to <code>a</code></td><td align="center"><code>a %= b</code></td></tr>
<tr><td align="center"><code>&amp;=</code></td><td align="center">And Assign</td><td align="center">Assigns the value of <code>a &amp; b</code> to <code>a</code></td><td align="center"><code>a &amp;= b</code></td></tr>
<tr><td align="center"><code>|=</code></td><td align="center">Or Assign</td><td align="center">Assigns the value of <code>a | b</code> to <code>a</code></td><td align="center"><code>a |= b</code></td></tr>
<tr><td align="center"><code>^=</code></td><td align="center">Xor Assign</td><td align="center">Assigns the value of <code>a ^ b</code> to <code>a</code></td><td align="center"><code>a ^= b</code></td></tr>
<tr><td align="center"><code>&lt;&lt;=</code></td><td align="center">Left Shift Assign</td><td align="center">Assigns the value of <code>a &lt;&lt; b</code> to <code>a</code></td><td align="center"><code>a &lt;&lt;= b</code></td></tr>
<tr><td align="center"><code>&gt;&gt;=</code></td><td align="center">Right Shift Assign</td><td align="center">Assigns the value of <code>a &gt;&gt; b</code> to <code>a</code></td><td align="center"><code>a &gt;&gt;= b</code></td></tr>
</tbody></table>
<p>The result of any expression containing operators can be assigned to a new or existing variable by simply using the expression as the right argument of <code>=</code>.</p>
<pre><code class="language-c">/// The value of a is the result of the expression.
double a = (6 + 7) / (5.0 * 4);  ///&lt; a == 0.650000
</code></pre>
<h3 id="sizeof"><a class="header" href="#sizeof"><code>sizeof</code></a></h3>
<p>There is also one final operator called the <code>sizeof</code> operator which returns the number of bytes a particular piece of data occupies in memory. The <code>sizeof</code> operator uses a function call syntax with the argument being the data to be queried.</p>
<pre><code class="language-c">int a = 4;
double b = 3.154;

int sz_a = sizeof(a);   //&lt; 4
int sz_b = sizeof(b);   //&lt; 8
</code></pre>
<h2 id="enumerations"><a class="header" href="#enumerations">Enumerations</a></h2>
<p>The last data type we will look at is the enum. Enums are another integral data type however, they have a limited number of possible states where each state is named by the user. For example consider a Boolean type <code>Bool</code>; although a builtin type can be represented by a enum with its possibles states being <code>False</code> and <code>True</code>. The states or enumerators of an enum are integral constants ie. each name has a particular integer value associated with it. Using the <code>Bool</code> example again, the value of <code>False</code> could be 0 and the value of <code>true</code> could be 1. This would restrict a <code>Bool</code> to only being <code>True</code> or <code>False</code> (1 or 0).</p>
<pre><code class="language-c">enum Bool { False = 0, True = 1 };
</code></pre>
<p>Enums in C can be named (like <code>Bool</code>) or unnamed where the variants are simply generated as named integral constants (similar to just creating constant variables for each variants). Enum variants are accessible as long as the enum is in scope meaning I could use say <code>False</code> anywhere in the program that <code>Bool</code> is in scope without having to express in the language directly that <code>False</code> comes from <code>Bool</code>. The enumerators of an enum always have an underlying type of <code>int</code> meaning they can be used like constant integer value due to C's weak type system. Enumerators will always start with a value of 0 if no value is specified and increase for each subsequent variant however, it is possible to specify any value for variants as long as they are unique.</p>
<h2 id="type-casting"><a class="header" href="#type-casting">Type Casting</a></h2>
<p>Often it is useful to be able to convert data of one type to another. This can be done via type casting. This involve prefixing a variable (or function call return) with the desired type you want to cast to surrounded in parenthesis. This will cast the bits of the current variable to the new type which can then be save to a variable of the appropriate type or passed to a functions expecting that type.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    int i = 97;
    printf(&quot;i = %d\n&quot;, i);

    char ic = (char)i;  //&lt; Cast to char
    printf(&quot;i = ic = '%c'\n&quot;, ic);

    return 0;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="printing"><a class="header" href="#printing">Printing</a></h1>
<p>We're going to briefly discuss how to print stuff to the terminal so you can start writing some C.</p>
<h2 id="printf"><a class="header" href="#printf"><code>printf</code></a></h2>
<p>Earlier we saw the <code>puts()</code> function which prints strings to the terminal. This function is really good for strings but does not work for any other data type. Instead, there is the <code>printf()</code> function which prints formatted text to the terminal. This allows you to print different data types to the terminal and control various aspects of the output.</p>
<h3 id="signature"><a class="header" href="#signature">Signature</a></h3>
<p>The general signature of <code>printf()</code> is quite unique in C and how it achieves it is a bit of compiler magic in order to actually implement but you do not have to worry about it. <code>printf()</code> takes as its first argument a string that represents the output format of the printed text. The next argument is the <code>...</code>. This is called the ellipsis and it is used to represent a variable number of untyped function arguments. This allows you to pass ass many arguments as you want to <code>printf()</code> and it will print them all as long as there are an equivalent number of positional arguments in the format string. The variadic arguments are inserted in output string in the same order they are passed to <code>printf()</code> ie. there is now way to indicate in the format string which variadic argument to use at any given positional argument. The positional argument introducer character is the <code>%</code> followed by a modifier to indicate in incoming type.</p>
<pre><code class="language-c">printf(char* fmtstring, ...);
</code></pre>
<blockquote>
<p><strong>Note:</strong></p>
<ul>
<li>Ignore the use of <code>char*</code> for now.</li>
<li><code>printf()</code> is that it doesn't pad the end if the output string with a newline so you will have to manually provide it. The newline character is <code>'\n'</code>. The backslash is a special character that indicates the proceeding character is &quot;escaped&quot;. Escaped characters have special meanings for string and character data.
If the format string doesn't have any positional arguments then <code>printf()</code> will just print the string like <code>puts()</code>.
<code>printf()</code> is not able to print data of any kind without a format string ie. <code>printf(10)</code> would fail to compile.</li>
</ul>
</blockquote>
<h3 id="example"><a class="header" href="#example">Example</a></h3>
<p>The following simple code snippet creates to variables <code>num</code> and <code>dec</code> and computes their <code>sum</code>. It then prints a string according to the format <code>&quot;%d + %f = %f&quot;</code>, substituting <code>num</code>, <code>dec</code> and <code>sum</code> respectively.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    int num     = 4;
    double dec  = 3.54756;
    double sum  = num + dec;

    printf(&quot;%d + %f = %f&quot;, num, dec, sum);

    return 0;
}
</code></pre>
<blockquote>
<p>Question: Notice how we used <code>double</code> for the type of <code>sum</code>. What would happen if <code>sum</code> type was <code>int</code>?</p>
</blockquote>
<p>If you want to have a play with <code>printf()</code>, copy the following code snippet run it on your own device. The command will be identically to 'Hello World!'.</p>
<h3 id="formatting-specification"><a class="header" href="#formatting-specification">Formatting Specification</a></h3>
<p>You'll notice we used a different character after the <code>%</code> for each argument. This is because <code>printf()</code> needs to know the type of the incoming arguments so that it can format the string appropriately. For example floating point types have to use a decimal point when transformed into a text format while integers do not.</p>
<p>C has a concise language for <code>printf()</code> format arguments with the general format for a positional argument specifier being:</p>
<p><code>_%\[flag\]\[width\]\[.precision\]\[length\]type-specifier_</code></p>
<p>There are a variety of different options for each part of the specification. Below is a series of tables breaking down the various options for each sub-specifier but note that only <em>type-specifier</em> is needed, the others are optional.</p>
<h4 id="type-specifiers"><a class="header" href="#type-specifiers">Type Specifiers</a></h4>
<table><thead><tr><th align="center">Type Specifier</th><th align="center">Type</th><th align="center">Example</th></tr></thead><tbody>
<tr><td align="center"><code>%</code></td><td align="center">Two sequential <code>%</code> will result in a single <code>%</code> being printed.</td><td align="center">%</td></tr>
<tr><td align="center"><code>d</code> or <code>i</code></td><td align="center">Signed Decimal Integer</td><td align="center"><code>392</code></td></tr>
<tr><td align="center"><code>u</code></td><td align="center">Unsigned Decimal Integer</td><td align="center"><code>7235</code></td></tr>
<tr><td align="center"><code>o</code></td><td align="center">Unsigned Octal Integer</td><td align="center"><code>610</code></td></tr>
<tr><td align="center"><code>x</code> or <code>X</code></td><td align="center">Unsigned Hexadecimal Integer (<code>X</code>: uppercase variant)</td><td align="center"><code>7fa</code> or <code>7FA</code></td></tr>
<tr><td align="center"><code>f</code> or <code>F</code></td><td align="center">Decimal Floating Point (<code>F</code>: uppercase variant for special numbers eg. <code>nan</code> vs <code>NAN</code>)</td><td align="center"><code>392.65</code></td></tr>
<tr><td align="center"><code>e</code> or <code>E</code></td><td align="center">Scientific Notation (mantissa and exponent) (<code>E</code>: uppercase variant)</td><td align="center"><code>3.9265e+2</code> or <code>3.9265E+2</code></td></tr>
<tr><td align="center"><code>g</code> or <code>G</code></td><td align="center">Use the shortest representation: <code>%e</code> or <code>%f</code> (<code>G</code>: uses uppercase variants)</td><td align="center"><code>7fa</code> or <code>7Fa</code></td></tr>
<tr><td align="center"><code>a</code> or <code>A</code></td><td align="center">Hexadecimal Floating Point (<code>A</code>: uppercase variant)</td><td align="center"><code>7fa</code> or <code>7Fa</code></td></tr>
<tr><td align="center"><code>c</code></td><td align="center">Character</td><td align="center"><code>a</code></td></tr>
<tr><td align="center"><code>s</code></td><td align="center">String</td><td align="center"><code>example</code></td></tr>
<tr><td align="center"><code>p</code></td><td align="center">Pointer Address</td><td align="center"><code>0x7ffce531691c</code></td></tr>
<tr><td align="center"><code>n</code></td><td align="center">Prints nothing. The argument corresponding to this specifier must be pointer to a signed integer. Stores the number of character written so far.</td><td align="center"></td></tr>
</tbody></table>
<h4 id="flags"><a class="header" href="#flags">Flags</a></h4>
<table><thead><tr><th align="center">Flag</th><th align="center">Description</th></tr></thead><tbody>
<tr><td align="center"><code>-</code></td><td align="center">Left-justify within the given field width; Right justification is the default (see <a href="chapter2/printing.html#width">width</a> sub-specifier).</td></tr>
<tr><td align="center"><code>+</code></td><td align="center">Forces to preceed the result with a plus or minus sign (+ or -) even for positive numbers. By default, only negative numbers are preceded with a - sign.</td></tr>
<tr><td align="center"><em>space</em></td><td align="center">If no sign is going to be written, a blank space is inserted before the value.</td></tr>
<tr><td align="center"><code>#</code></td><td align="center">Used with <code>o</code>, <code>x</code> or <code>X</code> specifiers the value is preceded with <code>0</code>, <code>0x</code> or <code>0X</code> respectively for values different than zero. Used with <code>a</code>, <code>A</code>, <code>e</code>, <code>E</code>, <code>f</code>, <code>F</code>, <code>g</code> or <code>G</code> it forces the written output to contain a decimal point even if no more digits follow. By default, if no digits follow, no decimal point is written.</td></tr>
<tr><td align="center"><code>0</code></td><td align="center">Left-pads the number with zeroes (<code>0</code>) instead of spaces when padding is specified (see <a href="chapter2/printing.html#width">width</a> sub-specifier).</td></tr>
</tbody></table>
<h4 id="width"><a class="header" href="#width">Width</a></h4>
<table><thead><tr><th align="center">Width</th><th align="center">Description</th></tr></thead><tbody>
<tr><td align="center"><em>number</em></td><td align="center">Minimum number of characters to be printed. If the value to be printed is shorter than this number, the result is padded with blank spaces. The value is not truncated even if the result is larger.</td></tr>
<tr><td align="center"><code>*</code></td><td align="center">The <strong>width</strong> is not specified in the <strong>format</strong> string, but taken from the next variadic argument from <code>printf()</code>.</td></tr>
</tbody></table>
<h4 id="precision"><a class="header" href="#precision">Precision</a></h4>
<table><thead><tr><th align="center">.precision</th><th align="center">Description</th></tr></thead><tbody>
<tr><td align="center"><em>.number</em></td><td align="center">For integer specifiers (<code>d</code>, <code>i</code>, <code>o</code>, <code>u</code>, <code>x</code>, <code>X</code>): precision specifies the minimum number of digits to be written. If the value to written is shorter than this number, the result is padded with leading zeros. The value is not truncated even if the result is longer. A precision of <code>0</code> means that no character is written for the value 0. For <code>a</code>, <code>A</code>, <code>e</code>, <code>E</code>, <code>f</code> and <code>F</code> specifiers: this is the number of digits to be printed after the decimal point (by default, this is 6). For g and G specifiers: This is the maximum number of significant digits to be printed. For <code>s</code>: this is the maximum number of characters to be printed. By default all characters are printed until the ending null character is encountered. If the period is specified without an explicit value for precision, <code>0</code> is assumed.</td></tr>
<tr><td align="center"><code>.*</code></td><td align="center">The <strong>precision</strong> is not specified in the <strong>format</strong> string, but taken from the next variadic argument from printf().</td></tr>
</tbody></table>
<h4 id="length"><a class="header" href="#length">Length</a></h4>
<table>
<thead>
  <tr>
    <th></th>
    <th colspan="7">Type Specifier</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>Length Modifier</td>
    <td><code>d</code>, <code>i</code></td>
    <td><code>u</code>, <code>o</code>, <code>x</code>, <code>X</code></td>
    <td><code>f</code>, <code>F</code>, <code>e</code>, <code>E</code>, <code>g</code>, <code>G</code>, <code>a</code>, <code>A</code></td>
    <td><code>c</code></td>
    <td><code>s</code></td>
    <td><code>p</code></td>
    <td><code>n</code></td>
  </tr>
  <tr>
    <td>(none)</td>
    <td><code>int</code></td>
    <td><code>unsigned int</code></td>
    <td><code>double</code></td>
    <td><code>int</code></td>
    <td><code>char*</code></td>
    <td><code>void*</code></td>
    <td><code>int*</code></td>
  </tr>
  <tr>
    <td><code>hh</code></td>
    <td><code>signed char</code></td>
    <td><code>unsigned char</code></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td><code>signed char*</code></td>
  </tr>
  <tr>
    <td><code>h</code></td>
    <td><code>short int</code></td>
    <td><code>unsigned short int</code></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td><code>short int*</code></td>
  </tr>
  <tr>
    <td><code>l</code></td>
    <td><code>long int</code></td>
    <td><code>unsigned long int</code></td>
    <td></td>
    <td><code>wint_t</code></td>
    <td><code>wchar_t*</code></td>
    <td></td>
    <td><code>long int*</code></td>
  </tr>
  <tr>
    <td><code>ll</code></td>
    <td><code>long long int</code></td>
    <td><code>unsigned long long int</code></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td><code>long long int*</code></td>
  </tr>
  <tr>
    <td><code>j</code></td>
    <td><code>intmax_t</code></td>
    <td><code>uintmax_t</code></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td><code>intmax_t</code></td>
  </tr>
  <tr>
    <td><code>z</code></td>
    <td><code>size_t</code></td>
    <td><code>size_t</code></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td><code>size_t</code></td>
  </tr>
  <tr>
    <td><code>t</code></td>
    <td><code>ptrdiff_t</code></td>
    <td><code>ptrdiff_t</code></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td><code>ptrdiff_t</code></td>
  </tr>
  <tr>
    <td><code>L</code></td>
    <td></td>
    <td></td>
    <td><code>long double</code></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</tbody>
</table>
<div style="break-before: page; page-break-before: always;"></div><h1 id="arrays--strings"><a class="header" href="#arrays--strings">Arrays &amp; Strings</a></h1>
<p>There are two vital data types we haven't formally looked at yet. These are the string and array data types. These are integral to building collections of data and being able to store large chunks of data in a single variable.</p>
<h2 id="strings"><a class="header" href="#strings">Strings</a></h2>
<p>What are strings? Strings are a sequence bytes represented as a collection of characters (<code>char</code>s) that (typically) end in a null-string-terminator. Strings are the primary type used to interact with any form of IO with all forms of data being serialized to and from strings. C doesn't have a dedicated type for strings. This is because strings are just a collection of <code>char</code> and this can simply be represented as a contiguous block of memory interpreted as <code>char</code>. To create a block of <code>char</code>, use the <code>[]</code> initialiser after the variable name. This will create a block that is the same size as its initialiser string. String literals are introduced using double quotes. eg.:</p>
<pre><code class="language-c">char str[] = &quot;Hello&quot;;
</code></pre>
<blockquote>
<p><strong>Note:</strong></p>
<ul>
<li>Unlike some languages; like Python, there is a big difference between single quotes (<code>''</code>) and double quotes (<code>&quot;&quot;</code>). Single quotes are exclusive to character types while strings are always double quotes, even if they only store a single character.</li>
<li>If you have intellisense and hover over a string literal you might notice it states its size as one more then the number of characters actually in the string. This is because all string literals have an invisible character <code>'\0'</code> called the null-terminator which is used to denote the end.</li>
</ul>
</blockquote>
<h2 id="arrays"><a class="header" href="#arrays">Arrays</a></h2>
<p>Strings are not the only collection type; in fact, they are a specialisation of a more generic structure in C called arrays. Arrays represent a contiguous sequence of elements, all of which must be of the same type. Arrays also must have a known size at compile time meaning they cannot be dynamically resized. Elements of an array are accessed using the subscript operator <code>[]</code> which takes a 0-based index. Arrays in C are very primitive and are designed to be a close analogy to a machine memory. Array types are any variable name suffixed with <code>[]</code>. The size of the array can be explicitly set by passed an unsigned integral constant to the square brackets however, if the initial size is known then the size can be elided. Arrays are initialised using an initialiser list which are a comma separated list of values surrounded in braces (<code>{}</code>) with strings being the only exception.</p>
<blockquote>
<p><strong>Note:</strong> Because there are no complex types in C, strings are just an array of <code>char</code>.</p>
</blockquote>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    int a[] = { 1, 2, 3, 4 };
    char b[5] = { 'H', 'e', 'l', 'l', 'o' };

    printf(&quot;{ %d, &quot;, a[0]);
    printf(&quot;%d, &quot;, a[1]);
    printf(&quot;%d, &quot;, a[2]);
    printf(&quot;%d }\n&quot;, a[3]);

    printf(&quot;\&quot;%c&quot;, b[0]);
    printf(&quot;%c&quot;, b[1]);
    printf(&quot;%c&quot;, b[2]);
    printf(&quot;%c&quot;, b[3]);
    printf(&quot;%c\&quot;\n&quot;, b[4]);

    return 0;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="control-flow"><a class="header" href="#control-flow">Control Flow</a></h1>
<p>Control flow is an integral part of any computer program. They allow use to change which parts of a program run at runtime. C features three main categories of control flow, the first being <code>if</code> statements and its extensions which are the most common type of control flow used in C. The other two are switch statements and the ternary operator which provide slightly different semantics to their <code>if</code> counterparts.</p>
<h2 id="if-statements"><a class="header" href="#if-statements"><code>if</code> Statements</a></h2>
<p><code>if</code> statements are the most primitive form of control flow in programming. In essence, some block of code is isolated from the rest of the program, protected by some Boolean expression. If the Boolean expression evaluates as truth then the block of code is executed. In C the keyword <code>if</code> is used to introduce an <code>if</code> clause. This is the part of the statement that contains a Boolean expression (called a redicate) which is evaluated on arrival. The rest of the <code>if</code> statement is a block of code nested in braces which only executes when the <code>if</code> clause is <code>true</code>.</p>
<!-- > If are often implemented as a conditional jumps when compiled to assembly languages. -->
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    int a = 4;

    if (a &gt; 5)
    {
        puts(&quot;a &gt; 5&quot;);
    }

    return 0;
}
</code></pre>
<blockquote>
<p>What do you think the output of the above code is?</p>
</blockquote>
<h3 id="else-statements"><a class="header" href="#else-statements"><code>else</code> Statements</a></h3>
<p>Often an <code>if</code> statement on its own is not enough because there will always be two potential outcomes of the Boolean predicate the <code>true</code> and the <code>false</code> branches and we will often want to handle the case when the predicate fails. This is where an <code>else</code> statement comes in. <code>else</code> statements have no predicate clause as it is bound to the alternative outcome of an <code>if</code> clause. C uses the <code>else</code> keyword to introduce the <code>else</code> statement which is just another code block surrounded in braces.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    int a = 4;

    if (a &gt; 5)
    {
        puts(&quot;a &gt; 4&quot;);
    }
    else
    {
        puts(&quot;a &lt;= 4&quot;);
    }

    return 0;
}
</code></pre>
<blockquote>
<p><strong>Note:</strong></p>
<p>The placement of braces in C is not strict ie. the above can be written as:</p>
<pre><code class="language-c">  #include &lt;stdio.h&gt;

  int main() {
      int a = 4;

      if (a &gt; 5) {
          puts(&quot;a &gt; 4&quot;);
      } else {
          puts(&quot;a &lt;= 4&quot;);
      }

      return 0;
  }
</code></pre>
</blockquote>
<h3 id="else-if-clauses"><a class="header" href="#else-if-clauses"><code>else-if</code> Clauses</a></h3>
<p>C allows use to extend the usage of <code>else</code> statements with additional <code>if</code> clauses. This allows you to form an <code>else-if</code> clause which allows you to test multiple predicates and select only one block of code to execute. These additional clauses are called branches of the program as the line of execution can differ depending on runtime conditions.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    int a = 4;

    if (a &gt; 5)
    {
        puts(&quot;a &gt; 4&quot;);
    }
    else if (a == 4)
    {
        puts(&quot;a == 4&quot;);
    } 
    else
    {
        puts(&quot;a &lt; 4&quot;);
    }

    return 0;
}
</code></pre>
<blockquote>
<p><strong>Note:</strong></p>
<p>Inefficient usage of branching constructs can cause massive slow downs of many systems at large scales due to a CPU level optimisation called branch prediction which tries to 'predict' which branch is most likely to occur and load the instructions corresponding to its code block into the cache ahead of time. However, a large number of branches increases the chance of these algorithms being incorrect which can lead to a cache miss which involves the CPU having to wipe the cache of the prefetched instructions and then lookup and load the correct instructions which can be expensive if the branching code runs a lot.</p>
</blockquote>
<h2 id="switch-statements"><a class="header" href="#switch-statements"><code>switch</code> Statements</a></h2>
<p>The other main control flow construct in C is called the <code>switch</code> statement. These take an integral value and matches it against a particular <code>case</code> for which it is equal and executes the corresponding code block. While similar are to <code>if</code> statements, <code>switch</code> statements differ in a subtle way. <code>switch</code> statements allow for fallthrough which means that the line of execution will continue through different cases if the <code>switch</code> statement is not broken out of using a <code>break</code> statement. The most common use of <code>switch</code> statements is with enums as they allow you to use an enum to represent a finite list of possible states and handle each case accordingly. <code>switch</code> statements can also have a default case to handle any uncaught matches.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

enum cmp_result_t { UNDEF, EQUAL, LESS, GREATER };

int main()
{
    int a = 4;
    cmp_result_t cmp_r = UNDEF;

    if (a &gt; 5)
    {
        cmp_r = GREATER;
    }
    else if (a == 4)
    {
        cmp_r = EQUAL;
    } 
    else
    {
        cmp_r = LESS;
    }

    switch (cmp_r)
    {
        case EQUAL:
            puts(&quot;equal&quot;);
            break;
        
        case LESS:
            puts(&quot;less&quot;);
            break;

        case GREATER:
            puts(&quot;greater&quot;);
            break;

        default:
            puts(&quot;NaN&quot;);
            break;
    }

    return 0;
}
</code></pre>
<h2 id="ternary-operator"><a class="header" href="#ternary-operator">Ternary Operator</a></h2>
<p>The final control flow construction is the ternary operator. This is a condensed <code>if</code> statement that is able to return a value. It involves a Boolean predicate followed by two expressions that may return or have side effects (ie. print something). The ternary operator comprises of the symbol <code>?:</code> where <code>?</code> is used to separate the predicate and branches and <code>:</code> is used to separate the branches.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    int a = 4;
    a &gt; 4 ? puts(&quot;a &gt; 4&quot;) : puts(&quot;a &lt;= 4&quot;);

    int b = a &gt; 4 ? a + 5 : a * 100;
    printf(&quot;%d\n&quot;, b);

    return 0;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="loops"><a class="header" href="#loops">Loops</a></h1>
<p>Loops area another integral construct in almost every programming language. They allow us easily and efficiently express code that we want to repeat. Loops generally execute while a particular predicate is upheld. Loops are essential to programming generic algorithms that operate on constructs that have a varying number of elements such as arrays.</p>
<h2 id="while-loops"><a class="header" href="#while-loops"><code>while</code> Loops</a></h2>
<p>The most primitive of any loop is the <code>while</code> loop. As its name suggests a <code>while</code> loop will execute 'while' a particular predicate is still <code>true</code>. <code>while</code> loops have a similar syntax to <code>if</code> statements. Loops are often paired with an integral value indicating the current state of the loop. Because C loops are primitive and close analogies for the eventual assembly language they do not automatically track the state of the integral meaning you have to manually update its state.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    int i = 0;
    while (i &lt; 5)
    {
        printf(&quot;%d\n&quot;, i);
        i++;
    }

    return 0;
}
</code></pre>
<h2 id="do-while-loops"><a class="header" href="#do-while-loops"><code>do-while</code> Loops</a></h2>
<p><code>do-while</code> loops are similar to <code>while</code> except that the body of the loop is guaranteed to execute at least once. This is because; unlike <code>while</code> loops, the predicate is checked at the end of each loop not the beginning.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    int i = 0;
    do
    {
        printf(&quot;%d\n&quot;, i);               //&lt; But this still runs once
    } while (i &lt; 0);  //&lt; Will never be true ^

    return 0;
}
</code></pre>
<h2 id="for-loops"><a class="header" href="#for-loops"><code>for</code> Loops</a></h2>
<p>While <code>while</code> loops will run while a predicate is <code>true</code> which can potentially be 'infinite', <code>for</code> loops differ slightly in their semantics. <code>for</code> loops typically run for a particular number of iterations and are usually used with arrays to efficiently perform operations on the entire array. <code>for</code> loops have three key sub-statements that control its execution. The first is a statement used to initialise a variable to represent the current state. The second is the predicate the controls whether the loops continues and the final one is a post-loop expression that runs at the end of each iteration and is often used to increment or modify the current state integral. Each of these statements are separated by a <code>;</code> in the clause (parenthesis) of the <code>for</code> loop.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    int a[] = { 1, 2, 3, 4, 5 };

    for (int i = 0; i &lt; sizeof(a) / sizeof(a[0]); ++i)
    {
        printf(&quot;%d\n&quot;, a[i]);
    }

    return 0;
}
</code></pre>
<blockquote>
<p><strong>Note:</strong></p>
<ul>
<li>Any loop can be exited early using a <code>break</code> statement.</li>
<li>C doesn't have a function to retrieve the size of an array. However, we can use the <code>sizeof</code> operator to retrieve the total number of bytes the entire array occupies and then divide it by the size of one of the elements. This works because each element in an array are contiguous and aligned and thus it is easy to determine the number of bytes to jump for each element and because each element is the same size (type) then the total number of bytes is the array size types the size of each element.</li>
</ul>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="functions"><a class="header" href="#functions">Functions</a></h1>
<p>The final core construction in C is functions. Functions are the most basic form of abstraction in all of computing. They allow us isolate and organise code into a common pattern that we can utilise and execute as we need.</p>
<h2 id="what-is-a-function"><a class="header" href="#what-is-a-function">What is a function?</a></h2>
<p>Functions in C, while called functions, are more like sub-routines, a packaged piece of executable code, almost like a mini program we can use in a larger context. The reason I mention this is because functions in C are not pure functions ie. they are not as sound as mathematical functions, they're more hacky then that. This is largely because functions in C can have side effects and we have actually seen this a lot already. The difference between a pure function and a subroutine is that a function takes some input data called a parameter, argument or point (or tuple of data if multiple input points are needed) and returns another value. There is a clear pipeline of inputs and outputs to a function of this nature; think of an add (<code>+</code>) function, two arguments are given and a single value is returned. Side effects are operations which have an effect on something outside the function without communicating that information in its input or output. Be best example of side effects are any IO function like <code>puts()</code> or <code>printf()</code>. These are functions by the C standard however, notice how we never took into account that we don't capture a return value from <code>printf()</code> but it still printed to the screen or even the possibility that <code>printf()</code> may have returned something and <code>printf()</code> does. In fact it returns the number of characters written to its output stream (standard out - <code>stdout</code>) and this is where the issue arises. By the definition of a function we described above, <code>printf()</code> is more like a character counter function after formatting as it inputs are just a string and a variable number of additional points and it returns the number of characters of the final formatted stream. Where is the information encoding the interaction is has with the screen? And thats just it, it doesn't. This is called a side effect, behaviour that is not defined or encoding in the information of the function. C functions have the capabilities to be pure but can also have side effects and this is what makes C functions more akin to sub-routines however, while this difference is good to know they are used like functions in other languages.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    int a = 5;
    double b = 365.57;
    unsigned sz = printf(&quot;%d + %f = %f\n&quot;, a, b, a + b);
    printf(&quot;%u\n&quot;, sz);

    return 0;
}
</code></pre>
<h2 id="function-signatures--definitions"><a class="header" href="#function-signatures--definitions">Function Signatures &amp; Definitions</a></h2>
<p>Functions in C have a particular signature. This is used to differentiate functions from each other. The key part of a signature is the functions name. This is used to call or refer to the function. In C there can be no duplicate functions meaning every function name must be unique, at least in the current translation unit (file). This includes name imported from header files (eg. <code>&lt;stdio.h&gt;</code>). A functions signature is also made up from the type of its input points and the return type. In general functions are declared first by their return type followed by their name. The points of a function are specified in a comma separated list surrounded in a parenthesis. Each point is a type declaration followed by a name, identical syntax to variable declarations. The body of a function is defined like other C constructions, using braces. Function bodies must contain a <code>return</code> statement which returns a value of the same type as the functions return type. Functions are also able to return <code>void</code> meaning that the function doesn't return anything. They are also able to take no input points.</p>
<pre><code class="language-c">int f(int a, double b)
{
    /// ....
}
</code></pre>
<blockquote>
<p><strong>Note:</strong></p>
<p>The declaration (signature) of a function can be declared separately (in a header file) from its definition (signature and body defined in a corresponding source file). If the declaration and definition are separated then the declaration replaces the braced code block with a semicolon <code>;</code> at the end of the signature's line. eg:</p>
<pre><code class="language-c">int f(int a, double b);
</code></pre>
</blockquote>
<h2 id="calling-functions"><a class="header" href="#calling-functions">Calling Functions</a></h2>
<p>Functions are called using the functions name suffixed with parenthesis. Within the parenthesis, the arguments are passed in the order they were declared in to the function. The data passed to a function will always copy the data to the functions input points. Functions are often declared and defined outside <code>main()</code> so they can be accessed from various parts of a codebase.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

void print_int_array(int arr[], unsigned long long sz)
{
    for (unsigned long long i = 0; i &lt; sz; ++i)
    {
        printf(&quot;%d\n&quot;, arr[i]);
    }
}

int main()
{
    int arr[] = { 1, 2, 3, 4, 5 };
    print_int_array(arr, sizeof(arr) / sizeof(arr[0]));

    return 0;
}
</code></pre>
<blockquote>
<p><strong>Note:</strong> If an array is used as an input point to a function, the size doesn't have to be specified.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pointers"><a class="header" href="#pointers">Pointers</a></h1>
<p>Memory is one of the most important concepts in all of computing. Memory is the primary resource utilised in all programs and when it comes to large scale applications and programs it can easily be depleted. Being able to fine tune and control memory usage is one the best ways to optimize programs to ensure they are efficient and fast. However, this has the downside the programmer must control exactly how memory is used at all times increasing the cognitive complexity of a program which increases the likelihood that memory is misused programs leaking the resource. Many languages hide the details of memory usage and control to help reduce this cognitive complexity and reduce the risks of manual memory management. This can be done a variety of ways, from interpreters and virtual machines (Python, Java and C#) to using abstractions and semantics to hide the details while still allowing control when needed (C++, Rust) to straight up using a completely unique memory and data models (Haskell) however, C's memory model is the closest to how memory is truly laid out in hardware, largely because C and computer architecture have evolved together for so many decades. This is also because C is compiled end-to-end meaning source code is compiled directly into the machine language of the target machine not an intermediate bytecode or otherwise. This means that it is far simpler for C to model a machines memory architecture than create its own. This also simplifies C concept of memory greatly giving programmers the greatest level of control of memory (and other compute resources).</p>
<h2 id="brief-introduction-into-memory"><a class="header" href="#brief-introduction-into-memory">Brief Introduction into Memory</a></h2>
<p>So what is memory? Memory; in its most abstract notion, is an 'infinite' sequence of fixed size cells. The size of these cells is (generally) 8-bits or a byte. On almost every computer, bytes are the smallest addressable unit of memory ie. they are the atoms of data. Any data you can build with a computer ultimately becomes some combination of bytes. But wait, what is a bit? A bit is a <em>binary digit</em>, thing of a regular (decimal) digit. It has 10 possible states (0..9) until it overflows and you need another digit (9 -&gt; 10). A bit has only two possible states, 0 and 1. Bits are used as the extremely effective at modelling logical circuits where a wire is either on or off. Bits form the foundation for all of computing. However, inspecting and manipulating individual bits is tedious and only useful for small scale interactions. The goal of computing is to increase the computational power and thus reduce the time it takes to perform certain operations. This is why memory uses bytes. They are far easier to manipulate and are able to represent far larger data sets than a single bit (\(2^{8}=256\) combinations to be exact). However, while we can address individual bytes in memory this can be quite limiting in the number possible <em>memory locations</em> a CPU can address if we used a byte to represent the numerical address location of memory (a byte). Instead many machines use a machine <em>word</em> which represents the size of data a CPU is able to understand/read. The size of a word will correspond to the size of a CPU's registers, memory and IO buses and arithmetic manipulation hardware. Most machines have a word size of 64-bits or 8 bytes which dramatically increases the size of the instruction set used by a CPU, the amount of data it can transfer on buses and the amount of memory a CPU is able to address (\(2^{8}=256\) vs. \(2^{64}=1.844674407371 × 10^{19}\)). This is the largest integral value a machine is able to handle for most operations (ignoring specialised hardware).</p>
<h3 id="the-stack--heap"><a class="header" href="#the-stack--heap">The Stack &amp; Heap</a></h3>
<p>Now, most computers do not give away all of their memory to a single application nor will memory used by an application allocate memory all from the same place. When a program executes the OS will allocates a small amount of memory to the memory for the instructions, constant data, meta data about the program and a small amount of free memory. This small amount of free memory is called the stack. Any local variables, function call stack and data created in a program are allocated to this part of the program automatically. However, the stack is quite small so when you need access to a large amount of memory you have to request it from the OS explicitly. The location where this OS owned memory is kept is called the heap (or free store). The heap is theoretically infinite in size allowing you to store large amounts of data however, you must remember to return it to the OS when you are done otherwise the memory will leak and the OS will loose track of it when your program finishes (or crashes).</p>
<h2 id="what-are-pointers"><a class="header" href="#what-are-pointers">What are Pointers?</a></h2>
<p>So how do we refer to a memory. Fundamentally we need to be able to store the address of some piece data. This address is just some unsigned integer; with a bit size equivalent to a machine word. Using this address we then need to be able redirect access to the data held by at this memory address. We could just use a special integer type that corresponds to a machine word type and use this to store an address however, we often want to be able to access other pieces of data surround the data at the address we are storing thus we need to also be able to encode the type or size of the data whose address we are holding. This is because, while addresses all have the same size/width, it may own some data that is larger or smaller. Remember the smallest addressable machine location is a byte not a machine word. This construction we have described is called a pointer, simply because holds the location of some data ie. it points to some data. The type of a pointer is the type of the data being <strong><em>pointed to</em></strong> followed by an asterisks.</p>
<pre><code class="language-c">bool* pb;       //&lt; Pointer to a bool
int* pi;        //&lt; Pointer to an int
float* pf;      //&lt; Pointer to a float
double* pd;     //&lt; Pointer to a double
void* pd;       //&lt; Pointer to a void
</code></pre>
<blockquote>
<p><strong>Note:</strong></p>
<ul>
<li><code>void*</code> represents a <strong>polymorphic</strong> pointer type meaning it can point to data of any type and must be cast to the correct type on usage.</li>
</ul>
</blockquote>
<!-- > - Usage in  function signatures -->
<h3 id="obtaining-pointers"><a class="header" href="#obtaining-pointers">Obtaining Pointers</a></h3>
<p>Every variable has an address regardless of whether they are created on the stack or the heap. So how do we get the address of a variable? There is a special operator we use called 'addressof' that returns the address of any variable. Its syntax is an ampersand (<code>&amp;</code>) prefixed to any variable name.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    int a = 4;
    double b = 5.687;

    int* ap = &amp;a;  //&lt; can be assigned to a variable...

    printf(&quot;%d is at address: %p&quot;, a, ap);
    printf(&quot;%f is at address: %p&quot;, b, &amp;b);  //&lt; or used as a temporary

    return 0;
}
</code></pre>
<h3 id="null"><a class="header" href="#null"><code>NULL</code></a></h3>
<p>Sometimes a pointer does not own or point to anything. Instead of it pointing to data that might potentially not be ours to access we instead set the pointer to point to a compiler defined location called <code>NULL</code>. This is the empty address which prevents invalid access to it, usually by crashing though rather than undefined behaviour occurring. Always initialise or set a pointer to <code>NULL</code> if it does point to something and always check; when reasonable, if a pointer is <code>NULL</code>  to prevent invalid access operations.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    int* p = NULL;
    printf(&quot;p points to: %p\n&quot;, p);

    int a = 4;
    p = &amp;a;

    printf(&quot;p points to: %p\n&quot;, p);

    return 0;
}
</code></pre>
<h3 id="pointer-operations"><a class="header" href="#pointer-operations">Pointer Operations</a></h3>
<p>Because pointers are just integral values we can perform regular integer arithmetic on them such as increment or decrement the address value to point to the next or previous memory location. You can also take the difference of two pointers to find the distance of two memory locations, add or take integral values from a pointer to jump a certain number of steps forward or backwards. The post important operation you can perform on a pointer is dereference it. This gives you access to the data being pointed to. Dereference involves using a prefix asterisks on the pointer variable. Any operation that is valid on the underlying data is valid on a dereference pointer.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    int a = 4;
    int* p = &amp;a;

    printf(&quot;p points to: %p, with a value %d\n&quot;, p, *p);

    return 0;
}
</code></pre>
<h3 id="pointers-to-pointers"><a class="header" href="#pointers-to-pointers">Pointers to Pointers</a></h3>
<p>Because pointers are just a numerical value they also have to store that numerical value. This value also has an address thus you are able to take the address of the pointer itself to obtain a pointer to a pointer. The type of a pointer to a pointer is the regular pointer type with additional asterisks suffixed to the type. This also means you can dereference the pointer to a pointer to obtainer the original pointers stored value which is the address of the original data. You can then dereference this pointer to get to the actual value. Additional dereferencing can be achieved by prefixing more asterisks to the pointer variable. This can be done for any number of pointer dereferences (pointer indirections).</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    int a = 4;
    int* p = &amp;a;
    int** pp = &amp;p;

    printf(&quot;pp points to: %p, with a value %p\n&quot;, pp, *pp);
    printf(&quot;p points to: %p, with a value %d\n&quot;, p, *p);

    return 0;
}
</code></pre>
<h3 id="strings--arrays-as-pointers"><a class="header" href="#strings--arrays-as-pointers">Strings &amp; Arrays as Pointers</a></h3>
<p>Earlier, we kind of lied to you. We said that C supports array types. This is not entirely true. In reality arrays are just a pointer to a contiguous block of memory. In particular, the pointer points to the first memory location (element) of the array. The one difference is that arrays support the use of the subscript operator <code>[]</code> which performs a jump of <code>n</code> elements from the first element and automatic dereference of the pointer value giving you efficient access to the desired element. And because strings are just character arrays they are really just a pointer to the first element in the string literal ie. a <code>char*</code>. Almost always an array will decay into a pointer to the first element, particular when passing it to a function.</p>
<blockquote>
<p>Note: Pointers still technically support <code>[]</code> but unless it points to a contiguous block of data, the operation is mostly useless.</p>
</blockquote>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main()
{
    char greeting[] = &quot;Hello&quot;;
    char* farewell = &quot;Goodbye&quot;;

    puts(greeting);
    puts(farewell);

    return 0;
}
</code></pre>
<!-- ## Function Pointers

~ -->
<div style="break-before: page; page-break-before: always;"></div><h1 id="dynamic-memory"><a class="header" href="#dynamic-memory">Dynamic Memory</a></h1>
<p>So far we have only used the stack for memory which has limited how much memory we can actually utilise. While this limit is implementation defined (differs depending on the platform and compiler) its also best not to fill up the stack with too much data that doesn't need to be there. Instead we can utilise the heap memory we discussed earlier, which is supplied by the OS. But how do we request this memory? For this we need to request the OS to allocate the necessary memory for our use and then allow us to access it. This is done by calling <code>malloc()</code>, which takes as input the size; in bytes, of the memory we wish to request from the OS and returns a <code>void*</code> to the allocated block. <code>malloc()</code> can be found in the <code>&lt;stdlib.h&gt;</code> header. Every called to <code>malloc()</code> must be paired with a call to <code>free()</code> which takes a pointer to a <code>malloc()</code> allocated block and returns the memory to the OS. Without <code>free()</code> the allocated memory will most likely not be freed by your program and thus leaks.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main()
{
    int* a = (int*)malloc(7 * sizeof(int));  //&lt; Allocate 7 integers
    printf(&quot;a lives at: %p\n&quot;, a);

    for (int i = 0; i &lt; 7; ++i)
        a[i] = i;

     for (int i = 0; i &lt; 7; ++i)
        printf(&quot;%d\n&quot;, a[i]);

    free(a);
    return 0;
}
</code></pre>
<blockquote>
<p><strong>Note:</strong></p>
<ul>
<li>Memory allocated by <code>malloc()</code> is left in an uninitialised stake meaning whatever values that were left in that memory block remain ie. the junk that is help by the memory doesn't get cleared.</li>
<li>Because <code>malloc()</code> just takes the number of bytes we want to allocate as a parameter we must calculate the total size of memory we need which depends on the size of an individual element ie. \(n × s\) where \(n\) is the number of elements we desire and \(s\) is the size of an individual element. We can use the <code>sizeof</code> operator on a type name to get the size of that type.</li>
</ul>
</blockquote>
<h2 id="zero-initialised-memory-allocation"><a class="header" href="#zero-initialised-memory-allocation">Zero-Initialised Memory Allocation</a></h2>
<p>Notice above we stated that <code>malloc()</code> returns a block of uninitialised memory but what if you want to memory that is initialised ahead of time. For this we use <code>calloc()</code>. This takes two parameters, the number of objects we wish to allocate and the size of each object. The memory block returned will have all of its bits initialised to 0.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main()
{
    int* a = (int*)calloc(4, sizeof(int));
    printf(&quot;a lives at: %p\n&quot;, a);

    for (int i = 0; i &lt; 4; ++i)
        printf(&quot;%d\n&quot;, a[i]);

    free(a);
    return 0;
}
</code></pre>
<h2 id="reallocated-memory"><a class="header" href="#reallocated-memory">Reallocated Memory</a></h2>
<p>We can also reallocate data to fit a larger or smaller amount. The elements from the old block will be copied to the new location until the new array is full or there are no more elements to copy. <code>realloc()</code> my not actual allocate memory in a new locating if there is free space next to the existing array. <code>realloc()</code> also works like <code>malloc()</code> where the new memory is left uninitialised. <code>realloc()</code> takes two parameters, the old pointer address and the new size.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main()
{
    int* a = (int*)malloc(4 * sizeof(int));
    printf(&quot;a lives at: %p\n&quot;, a);

    for (int i = 0; i &lt; 4; ++i)
        a[i] = i;

    for (int i = 0; i &lt; 4; ++i)
        printf(&quot;%d, &quot;, a[i]);

    a = (int*)realloc(a, 7);
    printf(&quot;\na lives at: %p\n&quot;, a);

    for (int i = 0; i &lt; 7; ++i)
        printf(&quot;%d, &quot;, a[i]);

    free(a);
    return 0;
}
</code></pre>
<blockquote>
<p><strong>Note:</strong></p>
<ul>
<li>Any memory allocated by <code>malloc()</code>, <code>calloc()</code> or <code>realloc()</code> must be returned to the OS by a call to <code>free()</code>.</li>
</ul>
</blockquote>
<h2 id="general-memory-utilities"><a class="header" href="#general-memory-utilities">General Memory Utilities</a></h2>
<p>C features a few byte based memory operations that is able to set, compare and copy data. These are <code>memset()</code>, <code>memcmp()</code> and <code>memcpy()</code> respectively. These memory utilities are found in the <code>&lt;string.h&gt;</code> header.</p>
<h3 id="memset"><a class="header" href="#memset"><code>memset()</code></a></h3>
<p><code>memset()</code> takes an input pointer that you wish to modify, an <code>int</code> value which is narrowed to an <code>unsigned char</code>; such that each byte of the input memory is set this value, and a count for the number of bytes affected. This is not to be confused will a general fill algorithm as this function writes to individual bytes not to individual elements in a memory block.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

int main()
{
    int* a = (int*)calloc(4, sizeof(int));

    for (int i = 0; i &lt; 4; ++i)
        printf(&quot;%d, &quot;, a[i]);

    puts(&quot;&quot;);

    memset(a, (unsigned char)1, 6);

    for (int i = 0; i &lt; 4; ++i)
        printf(&quot;%d, &quot;, a[i]);

    free(a);
    return 0;
}
</code></pre>
<h3 id="memcmp"><a class="header" href="#memcmp"><code>memcmp()</code></a></h3>
<p><code>memcmp()</code> will lexicographically compare the bytes of two input pointers up until the specified count. Returning a negative value if the bytes passed as the left argument is greater than the right, 0 if they are the same or a positive value of the right is greater then the left.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

int main()
{
    int* a = (int*)calloc(4, sizeof(int));
    int* b = (int*)calloc(4, sizeof(int));

    for (int i = 0; i &lt; 4; ++i)
        printf(&quot;%d, &quot;, a[i]);

    puts(&quot;&quot;);

    for (int i = 0; i &lt; 4; ++i)
        printf(&quot;%d, &quot;, b[i]);

    puts(&quot;&quot;);

    int cmp = memcmp(a, b, 4);
    printf(&quot;a = b: %d\n&quot;, cmp);

    memset(a, (unsigned char)1, 6);

    cmp = memcmp(a, b, 4);
    printf(&quot;a = b: %d\n&quot;, cmp);

    free(a);
    free(b);
    return 0;
}
</code></pre>
<h3 id="memcpy"><a class="header" href="#memcpy"><code>memcpy()</code></a></h3>
<p><code>memcpy()</code> is probably the most useful as it allows you to efficiently copy the bytes directly from one memory block to another. It takes two input pointers with the first be the destination and the second being the source. it also takes a count for the number of bytes you want to copy.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

int main()
{
    int* a = (int*)calloc(4, sizeof(int));
    int b[] = { 1, 2, 3, 4 };

    for (int i = 0; i &lt; 4; ++i)
        printf(&quot;%d, &quot;, a[i]);

    puts(&quot;&quot;);

    for (int i = 0; i &lt; 4; ++i)
        printf(&quot;%d, &quot;, b[i]);

    puts(&quot;\n&quot;);

    memcpy(a, b, 4 * sizeof(int));

    for (int i = 0; i &lt; 4; ++i)
        printf(&quot;%d, &quot;, a[i]);

    puts(&quot;&quot;);

    for (int i = 0; i &lt; 4; ++i)
        printf(&quot;%d, &quot;, b[i]);

    puts(&quot;&quot;);

    free(a);
    return 0;
}
</code></pre>
<blockquote>
<p><strong>Note:</strong> If you access more bytes than what is allocated to a pointer using any of these algorithms or even directly will cause undefined behaviour which might (hopefull) crash the program or lead to consequences that are very hard to trace. Don't do it.</p>
</blockquote>
<h2 id="dynamic-string-utilities"><a class="header" href="#dynamic-string-utilities">Dynamic String Utilities</a></h2>
<p>Since operating on strings is so common their are more specific string manipulation functions available. These allow you to more easily work with character arrays and manipulate them in the way you would expect. These functions can be found in the <code>&lt;string.h&gt;</code> header.</p>
<h3 id="strlen"><a class="header" href="#strlen"><code>strlen()</code></a></h3>
<p>Obtains the length of a null-terminating string, not including the null-terminated character. It is undefined if the string is not null-terminated.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

int main()
{
    char c[] = &quot;Hello&quot;;

    printf(&quot;sizeof(c) = %zu\n&quot;, sizeof(c));
    printf(&quot;strlen(c) = %zu\n&quot;, strlen(c));

    return 0;
}
</code></pre>
<h3 id="strcmp"><a class="header" href="#strcmp"><code>strcmp()</code></a></h3>
<p>Compares to strings lexicographically, same manner as <code>memcmp()</code>. The return value is also an <code>int</code> with a negative value meaning the left is greater than the right, 0 meaning they are the same and a positive value meaning the right is greater than the left.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

int main()
{
    char a[] = &quot;Hello&quot;;
    char b[] = &quot;Hello&quot;;

    int cmp = strcmp(a, b);
    printf(&quot;a = b: %d\n&quot;, cmp);

    a[1] = 'E';
    cmp = strcmp(a, b);
    printf(&quot;a = b: %d\n&quot;, cmp);

    return 0;
}
</code></pre>
<h3 id="strcpy"><a class="header" href="#strcpy"><code>strcpy()</code></a></h3>
<p>Allows you to efficiently copy the characters from one string to another including the null-terminator. The first argument is the destination adn the second is the source. Returns a copy of the destination pointer.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

int main()
{
    char a[] = &quot;Hello&quot;;
    char b[strlen(a) + 1];  //&lt; +1 to accommodate the null-terminator

    printf(&quot;%s\n&quot;, a);
    printf(&quot;%s\n\n&quot;, b);

    strcpy(b, a);

    printf(&quot;%s\n&quot;, a);
    printf(&quot;%s\n&quot;, b);

    return 0;
}
</code></pre>
<h3 id="strcat"><a class="header" href="#strcat"><code>strcat()</code></a></h3>
<p>Concatenates two strings by appending the second string to the end of the first.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

int main()
{
    char a[13] = &quot;Hello&quot;;
    char b[] = &quot; World!&quot;;

    printf(&quot;%s\n&quot;, a);
    printf(&quot;%s\n\n&quot;, b);

    strcat(a, b);

    printf(&quot;%s\n&quot;, a);
    printf(&quot;%s\n&quot;, b);

    return 0;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="structures"><a class="header" href="#structures">Structures</a></h1>
<p>So far we have only been able to to manipulate primitive data types and collections of a single type but what if we want to manipulate and store data that is of different types. This is where structures come in. Structures are used to hold data of different types in a compact format. Structures are created using the <code>struct</code> keyword paired with a unique name followed by a brace scope of variable declarations. To then create a variable of the structure type you again use the <code>struct</code> keyword and the structures type name followed by a variable name. You can then initialise the fields using a comma separated list, enclosed in braces where each element is the desired value for initialising the field of the structure. The fields are then accessed using the variable and the member access operator (<code>.</code>) paired with the field's name.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

struct A
{
    int i;
    double d;
    char* c;
};

int main()
{
    struct A a = { 5, 576.658, &quot;Hello&quot; };
    printf(&quot;%d\n&quot;, a.i);
    printf(&quot;%f\n&quot;, a.d);
    printf(&quot;%s\n&quot;, a.c);

    return 0;
}
</code></pre>
<blockquote>
<p><strong>Note:</strong></p>
<ul>
<li>Structures do not support methods.</li>
<li>Elements in a structure a layed out contiguously ie. each element is right next to each other.</li>
<li>The size of a structure can be obtained normally using <code>sizeof</code>.</li>
</ul>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="macros--the-preprocessor"><a class="header" href="#macros--the-preprocessor">Macros &amp; The Preprocessor</a></h1>
<p>Sometimes we need to control how source code is compiled, enable certain parts of the source code while disabling other parts. How do you do this? This is done using macros in C. Macros are compile time expressions that are executed by a part of the compiler called the preprocessor.</p>
<h2 id="what-is-a-macro"><a class="header" href="#what-is-a-macro">What is a macro?</a></h2>
<p>Macros are expressions that are evaluated and removed from the final source code. They are created using a <code>#</code> followed by a macro identifier. One macro we have used consistently throughout this book is the <code>#include</code> macro which is used to copy the source code from header files into other source and header files. Macros in C mostly perform in-source text replacement.</p>
<blockquote>
<p><strong>Note:</strong> Conventionally, macro symbols (names) are written in all uppercase to prevent conflation with regular source code.</p>
</blockquote>
<h3 id="define--undef"><a class="header" href="#define--undef"><code>#define</code> &amp; <code>#undef</code></a></h3>
<p>The most common and general macro is the <code>#define</code> macro. This allows you to define a symbol that will be replaced with its definition during the compilation phase. <code>#undef</code> can be used to undefine a symbol so that its usage is ignored. Names, value, types and even function-like entities can be defined and undefined using <code>#define</code> and <code>#undef</code>.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

#define INT int

#define ADD(x, y) x + y

int main()
{
    INT i = 5;  //&lt; Ok
    printf(&quot;%d\n&quot;, i);
    printf(&quot;%d\n&quot;, ADD(i, 2));

    #undef INT
    // INT a = 4;  //&lt; Compile time error

    return 0;
}
</code></pre>
<blockquote>
<p>Note: Even though you can define function-like entities using macros I would highly recommend against it in 99% of cases as it is nearly impossible to debug as the macros are expanded and removed very early on in the compilation of a program.</p>
</blockquote>
<h4 id="include-guards"><a class="header" href="#include-guards">Include Guards</a></h4>
<p>One common use of macros is for include guards. These are valueless macros that are defined once for a header file and only expose the contents of the header file if the macro is not defined. This prevents headers from being included twice and causing a redefinition or duplication error. How does this work? Essentially, when a header is first encountered, a macro is checked. If it is <strong><em>not</em></strong> defined we then define it and define the rest of the contents of the header. If it was already defined then the header is 'empty'. This stops the contents of headers being imported multiple times or as a transitive dependency.</p>
<pre><code class="language-c">#ifndef HEADER
#define HEADER

/// Headers contents

#endif  /// HEADER
</code></pre>
<h4 id="defining-macros-from-the-command-line"><a class="header" href="#defining-macros-from-the-command-line">Defining Macros from the Command Line</a></h4>
<p>Macros are able to be defined from the command line through the compiler. Many compilers support a <code>-D</code> and <code>-U</code> fag which can define and undefine macros in source code respectively. These are typically used to control macros similar to header guards which control which parts of a codebase are defined eg. for different OS or graphical backends.</p>
<pre><code class="language-sh"># Forces in to be defined
gcc -o main -DUSE_WINDOWS_INT main.cpp
</code></pre>
<h3 id="if-elif-else-ifdef-ifndef-and-endif"><a class="header" href="#if-elif-else-ifdef-ifndef-and-endif"><code>#if</code>, <code>#elif</code>, <code>#else</code>, <code>#ifdef</code>, <code>ifndef</code> and <code>#endif</code></a></h3>
<p>The other common class of macros is the control flow macros. These can control which parts of the source code are visible to the compiler thus which parts are compiled. They can be used just like regular control flow using predicates to determine the correct part of the codebase to use. However, they often are used with empty macros which are control from the command line to easily control which parts of the code we wish to compile. The <code>#ifdef</code> and <code>#ifndef</code> macros are slightly different in the sense that they check if other macros are defined as apposed to checking a predicate. All control flow macros must end in <code>#endif</code> for the final macro expression to help denote the end of a macros scope as macros do not use braces.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

#if ADD
    int op(int a, int b)
    { return a + b; }
#elif SUB
    int op(int a, int b)
    { return a - b; }
#else
    int op(int a, int b)
    { return a * b; }
#endif /// ADD

int main()
{
    printf(&quot;%d\n&quot;, op(5, 6));

    return 0;
}
</code></pre>
<blockquote>
<p>Try it yourself. Write up the following code and see how using the <code>-D</code> flag when compiling it changes the outcome.</p>
</blockquote>
<h3 id="pragma"><a class="header" href="#pragma"><code>#pragma</code></a></h3>
<p>The final macro worth mentioning is the <code>#pragma</code> macro. This macro is special is it is used by compilers and libraries to implement specific and unique features to their platform. In essence these are non-portable and non-standard macro that are specific to the platform you are targeting or compiler you are building with. A common <code>#pragma</code> directive in many C compilers in the <code>#pragma once</code> directive which is designed to replace the need for header guard.</p>
<pre><code class="language-c">#pragma once

/// Header's content

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="challenges-1"><a class="header" href="#challenges-1">Challenges</a></h1>
<p>The challenges for this chapter can found in the <a href="https://github.com/MonashDeepNeuron/HPC-Training-Challenges">HPC Training Challenges</a> you should have cloned in the previous chapter. Remember to read the README's for each challenge for more details. Your attempts should be added and pushed to this repo in the corresponding directories and files.</p>
<blockquote>
<p>Note:</p>
<p>Do not forget to add a <code>main()</code> function which is used to run/test your solutions.</p>
</blockquote>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<ul>
<li><a href="chapter2/challenges.html#challenges">Challenges</a>
<ul>
<li><a href="chapter2/challenges.html#overview">Overview</a></li>
<li><a href="chapter2/challenges.html#challenge-1---hello-world">Challenge 1 - Hello World</a></li>
<li><a href="chapter2/challenges.html#challenge-2---fizzbuzz">Challenge 2 - FizzBuzz</a></li>
<li><a href="chapter2/challenges.html#challenge-3---fibonacci">Challenge 3 - Fibonacci</a></li>
<li><a href="chapter2/challenges.html#challenge-4---gcd--lcm">Challenge 4 - GCD &amp; LCM</a></li>
<li><a href="chapter2/challenges.html#challenge-5---bitwise-add">Challenge 5 - Bitwise Add</a></li>
<li><a href="chapter2/challenges.html#challenge-6---bitwise-multiply">Challenge 6 - Bitwise Multiply</a></li>
<li><a href="chapter2/challenges.html#challenge-7---sum-and-product-algorithms">Challenge 7 - Sum and Product Algorithms</a></li>
<li><a href="chapter2/challenges.html#challenge-8---array-concatenation">Challenge 8 - Array Concatenation</a></li>
</ul>
</li>
</ul>
<h2 id="challenge-1---hello-world"><a class="header" href="#challenge-1---hello-world">Challenge 1 - Hello World</a></h2>
<p>You're first challenge is to build and run 'Hello World!' on your own device. This should be relatively straight forward as there are no moving parts and the instructions are explicitly given at the start oft he chapter.</p>
<h2 id="challenge-2---fizzbuzz"><a class="header" href="#challenge-2---fizzbuzz">Challenge 2 - FizzBuzz</a></h2>
<p>Create a program called <code>fizzbuzz.c</code> that prints the numbers from <code>0..100</code> (inclusive) but every number divisible by <code>3</code> prints <code>Fizz</code> instead and any number divisible by <code>5</code> prints <code>Buzz</code> and any number divisible by both prints <code>Fizzbuzz</code>.</p>
<h2 id="challenge-3---fibonacci"><a class="header" href="#challenge-3---fibonacci">Challenge 3 - Fibonacci</a></h2>
<p>Create a program called <code>fib.c</code> that calculates the first ten fibonacci numbers and prints them to the terminal. The implementation is up to you however, it cannot hard code the values into the program.</p>
<h2 id="challenge-4---gcd--lcm"><a class="header" href="#challenge-4---gcd--lcm">Challenge 4 - GCD &amp; LCM</a></h2>
<p>This challenge consists of two tasks. The first is to create the G.C.D. (Greatest Common Divisor) algorithm. This can be done using whatever techniques you want. The second is to create the L.C.M. (Least Common Multiple) algorithm. This is a bit less common than G.C.D. so you may need to research a bit about it first.</p>
<h2 id="challenge-5---bitwise-add"><a class="header" href="#challenge-5---bitwise-add">Challenge 5 - Bitwise Add</a></h2>
<p>For this challenge you have to implement a function called <code>bitwise_add()</code> which, given two integers returns their sum using bitwise arithmetic. Any bitwise operators are allowed as well as conditional operators (eg. <code>==</code>, <code>&lt;</code>). You can use regular arithmetic operators (eg. <code>+</code>, <code>*</code>) if it is necessary to perform other intermediate calculations but it is possible to solve this challenge without them.</p>
<h2 id="challenge-6---bitwise-multiply"><a class="header" href="#challenge-6---bitwise-multiply">Challenge 6 - Bitwise Multiply</a></h2>
<p>This challenge is similar to the last but instead of implementing <code>+</code> you must implement <code>*</code> (product). Your implementation should be contained in a function called <code>bitwise_multiply()</code>. You can use any bitwise or conditional operators.</p>
<blockquote>
<p>Note: If you need <code>+</code> you can reimplement it internally in <code>bitwise_multiply</code> based on your solution from the previous challenge, import it to a header in this challenges folder and include it or copy it to this folder. Ask a trainer if you get stuck with this.</p>
</blockquote>
<h2 id="challenge-7---sum-and-product-algorithms"><a class="header" href="#challenge-7---sum-and-product-algorithms">Challenge 7 - Sum and Product Algorithms</a></h2>
<p>This challenge involves implementing the sum and product reductions on an array or memory block of integers. As a bonus challenge, try and make the algorithms more generic and work with any binary operator.</p>
<h2 id="challenge-8---array-concatenation"><a class="header" href="#challenge-8---array-concatenation">Challenge 8 - Array Concatenation</a></h2>
<p>In this challenge you have to implement an array concatenation function. This should join two arrays of the same type into a single array, similar to <code>strcat()</code>. You will need to allocate a new block of memory and in order to store the concatenated arrays which will requires the sizes of the two input arrays to be known by the function. This function should return a pointer to the resulting array.</p>
<blockquote>
<p>Note: The type of the array this function concatenates can be any type except <code>char</code>.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="m3"><a class="header" href="#m3">M3</a></h1>
<p><a href="https://docs.massive.org.au/M3/index.html">M3</a> is part of <a href="https://https://www.massive.org.au/">MASSIVE</a>, which is a High Performance Computing facility for Australian scientists and researchers. Monash University is a partner of MASSIVE, and provides as majority of the funding for it. M3 is made up of multiple different types of servers, with a total of 5673 cores, 63.2TB of RAM, 5.6PB of storage, and 1.7 million CUDA cores.</p>
<p>M3 utilises the <a href="https://slurm.schedmd.com/">Slurm</a> workload manager, which is a job scheduler that allows users to submit jobs to the cluster. We will learn a bit more about this later on.</p>
<p>This book will take you through the basics of connecting to M3, submitting jobs, transferring data to and from the system and some other things. If you want to learn more about M3, you can read the <a href="https://docs.massive.org.au/M3/index.html">M3 documentation</a>. This will give you a more in-depth look at the system, and how to use it.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started-1"><a class="header" href="#getting-started-1">Getting Started</a></h1>
<h2 id="request-an-account"><a class="header" href="#request-an-account">Request an account</a></h2>
<p>In order to access M3, you will need to request an account. To do this, follow this link: <a href="https://hpc.erc.monash.edu.au/karaage/aafbootstrap">HPC ID</a>. This should take you to a page this this: </p>
<p><img src="chapter3/./imgs/aaf.png" alt="HPC ID" /></p>
<p>Type in Monash, as you can see here. Select Monash University, and tick the Remember my organisation box down the bottom. Once you continue to your organisation, it will take you to the Monash Uni SSO login page. You will need to login with your Monash credentials.</p>
<p>You should now see something like this: <img src="chapter3/./imgs/hpcid.png" alt="HPC ID System" /></p>
<p>Once you are here, there are a couple things you will need to do. The first, and most important is to set your HPC password. This is the password you will use to login to M3. To do this, go to home, then click on Change Linux Password. This will take you through the steps of setting your password.</p>
<p>Once you have done this, you can move on to requesting access to the MDN project and getting access to gurobi.</p>
<h2 id="add-to-project"><a class="header" href="#add-to-project">Add to project</a></h2>
<p>To request to join the MDN project, again from the Home page click on Join Exiting Project. You should see a screen like this: <img src="chapter3/./imgs/join_project.png" alt="Join Project" /></p>
<p>In the text box type <code>vf38</code> and click search. This is the project code for MDN. Then select the project and click submit. You will now have to wait for the project admins to approve your request. Once they have done this, you will be able to access the project. This should not take longer than a few days, and you will get an email telling you when you have access.</p>
<p>Once you have access to everything, you are ready to get started with M3. Good job!!</p>
<h2 id="git-ssh-setup"><a class="header" href="#git-ssh-setup">Git SSH setup</a></h2>
<p>In order to reliably clone git repos in M3, in particular private ones, it is best practice to use SSH cloning. This is a bit more complicated to set up, but once it is done, it is much more streamlined. There are few steps involved. First, you will need to generate an SSH key on M3. Login to M3, and run the following command:</p>
<pre><code class="language-bash">ssh-keygen -t ed25519 -C &quot;your_email@example.com&quot;
</code></pre>
<p>This will then prompt you to enter a file location. Just press enter to use the default location. It will then ask you to enter a passphrase. This is optional, but recommended.</p>
<p>Once you have generated your key, you need to add it to the ssh agent. Do this by running:</p>
<pre><code class="language-bash">eval &quot;$(ssh-agent -s)&quot;
ssh-add ~/.ssh/id_ed25519
</code></pre>
<p>You will then need to copy the public key to your clipboard. You can do this by running:</p>
<pre><code class="language-bash">cat ~/.ssh/id_ed25519.pub
</code></pre>
<p>Then, go to your github account, go to settings, and click on the SSH and GPG keys tab. Click on New SSH key, and paste the key into the box. Give it a name, and click Add SSH key.</p>
<p>You should now be able to clone repos using SSH. To do this, go to the repo you want to clone, but instead of copying the HTTP link, copy the SSH link, and then its regular git cloning.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="logging-in"><a class="header" href="#logging-in">Logging In</a></h1>
<p>First you will need to ssh into a login node in the cluster. You do this by doing the following:</p>
<h2 id="windows-1"><a class="header" href="#windows-1">Windows</a></h2>
<p>If you are using windows, the best way to ssh into m3 is by using <a href="https://www.chiark.greenend.org.uk/%7Esgtatham/putty/latest.html">puTTY</a>.</p>
<p>Once installed and opened, you will see a page like this:</p>
<p><img src="chapter3/./imgs/putty_start.png" alt="puTTY config page" /></p>
<p>Type in your m3 username followed by <code>@m3.massive.org.au</code> and press enter or the Open button.</p>
<p>If it the first time accessing M3 from this client then you may see something like this:</p>
<p><img src="chapter3/./imgs/putty_key_not_cached.png" alt="puTTY auth page" /></p>
<p>Just click Accept, and puTTY will add the cluster's ssh fingerprint to cache.</p>
<h2 id="mac--linux"><a class="header" href="#mac--linux">Mac / Linux</a></h2>
<p>On macOS or linux, ssh is built into the terminal, so just copy the following into your shell, substituting username for your username.</p>
<pre><code class="language-bash">ssh username@m3.massive.org.au
</code></pre>
<p>You may get a similar warning to the above image about the server identity, just type <code>yes</code> or <code>Y</code> to accept it and add the ssh key to cache.</p>
<blockquote>
<p><strong>Note</strong>:
It is possible to use VSCode's built in terminal to ssh into M3, but it is not recommended. It puts unnecessary strain on the login nodes. M3 have a <a href="https://docs.massive.org.au/M3/connecting/strudel2/connecting-to-vscode.html">guide</a> on how to correctly connect to M3 using VSCode, however it is quite involved and not particularly necessary unless you want to do proper development on M3 and want to use VSCode to program in.</p>
</blockquote>
<p>Everything from now on will be the same across whatever computer you are using to access the cluster.</p>
<p>The first thing to pop up will be a request for a password. Don't worry when you don't see your cursor moving when typing, this is just for security. Your password is still being recorded.</p>
<p>Once you have logged in, you will come to a page that looks like this:</p>
<pre><code class="language-txt">+----------------------------------------------------------------------------+
|                            Welcome to MASSIVE M3                           |
|                                                                            |
|    For assistance please contact help@massive.org.au or (03) 9902 4845     |
|     The MASSIVE User Guide          https://docs.massive.org.au            |
+----------------------------------------------------------------------------+

  - Useful Slurm Commands:
     squeue
     sbatch &lt;slurm_script_file&gt;
     scontrol show job &lt;JOBID&gt;
     scancel &lt;JOBID&gt;

  - Massive User Scripts:
     show_job
     show_job &lt;JOBID&gt;
     show_cluster
     user_info

  - Slurm Sample Scripts are Here:
     /usr/local/hpcusr/latest/training/samples/slurm/

  - We recommend using smux to compile and test code on compute nodes.
  - How to use smux: https://docs.massive.org.au/M3/slurm/interactive-jobs.html

 For more details, please see:
    https://docs.massive.org.au/M3/slurm/slurm-overview.html
------------------------------------------------------------------------------

Use MASSIVE Helpdesk to request assistance with MASSIVE related computing
questions and problems. Email to help@massive.org.au and this will generate
a ticket for your issue.

------------------------------------------------------------------------------


[jasparm@m3-login2 ~]$
</code></pre>
<p>Once you are done and want to logout, just type <code>exit</code>. This will close the connection.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="linux-commands"><a class="header" href="#linux-commands">Linux Commands</a></h1>
<p>Even if you are already familiar with linux, please read through all of these commands, as some are specific to M3.</p>
<h2 id="basic-linux-commands"><a class="header" href="#basic-linux-commands">Basic Linux Commands</a></h2>
<table><thead><tr><th>Command</th><th>Function</th></tr></thead><tbody>
<tr><td><code>pwd</code></td><td>prints current directory</td></tr>
<tr><td><code>ls</code></td><td>prints list of files / directories in current directory (add a <code>-a</code> to list everything, including hidden files/directories</td></tr>
<tr><td><code>mkdir</code></td><td>makes a directory</td></tr>
<tr><td><code>rm &lt;filename&gt;</code></td><td>deletes <em>filename</em>. add <code>-r</code> to delete directory. add <code>-f</code> to force deletion (be really careful with that one)</td></tr>
<tr><td><code>cd &lt;directory&gt;</code></td><td>move directory.</td></tr>
<tr><td><code>vim</code> or <code>nano</code></td><td>bring up a text editor</td></tr>
<tr><td><code>cat &lt;filename&gt;</code></td><td>prints contents of file to terminal</td></tr>
<tr><td><code>echo</code></td><td>prints whatever you put after it</td></tr>
<tr><td><code>chmod &lt;filename&gt;</code></td><td>changes permissions of file</td></tr>
<tr><td><code>cp</code></td><td>copy a file or directory</td></tr>
<tr><td><code>mv &lt;filename&gt;</code></td><td>move or rename file or directory</td></tr>
</tbody></table>
<blockquote>
<p>Note: <code>.</code> and <code>..</code> are special directories. <code>.</code> is the current directory, and <code>..</code> is the parent directory. These can be used when using any command that takes a directory as an argument. Similar to these, <code>~</code> is the home directory, and <code>/</code> is the root directory. For example, if you wanted to copy something from the parent directory to the home directory, you could do <code>cp ../&lt;filename&gt; ~/</code>, without having to navigate anywhere.</p>
</blockquote>
<h2 id="cluster-specific-commands"><a class="header" href="#cluster-specific-commands">Cluster Specific Commands</a></h2>
<table><thead><tr><th>Command</th><th>Function</th><th>Flags</th></tr></thead><tbody>
<tr><td><code>show_job</code></td><td>prints information about your jobs</td><td></td></tr>
<tr><td><code>show_cluster</code></td><td>prints information about the cluster</td><td></td></tr>
<tr><td><code>user_info</code></td><td>prints information about your account</td><td></td></tr>
<tr><td><code>squeue</code></td><td>prints information about your jobs</td><td><code>-u &lt;username&gt;</code> to print information about a specific user</td></tr>
<tr><td><code>sbatch &lt;slurm_script_file&gt;</code></td><td>submit a job to the cluster</td><td></td></tr>
<tr><td><code>scontrol show job &lt;JOBID&gt;</code></td><td>prints information about a specific job</td><td></td></tr>
<tr><td><code>scancel &lt;JOBID&gt;</code></td><td>cancel a job</td><td></td></tr>
</tbody></table>
<h2 id="m3-specific-commands"><a class="header" href="#m3-specific-commands">M3 Specific Commands</a></h2>
<table><thead><tr><th>Command</th><th>Function</th></tr></thead><tbody>
<tr><td><code>module load &lt;module_name&gt;</code></td><td>load a module</td></tr>
<tr><td><code>module unload &lt;module_name&gt;</code></td><td>unload a module</td></tr>
<tr><td><code>module avail</code></td><td>list available modules</td></tr>
<tr><td><code>module list</code></td><td>list loaded modules</td></tr>
<tr><td><code>module spider &lt;module_name&gt;</code></td><td>search for a module</td></tr>
<tr><td><code>module help &lt;module_name&gt;</code></td><td>get help for a module</td></tr>
<tr><td><code>module show &lt;module_name&gt;</code></td><td>show details about a module</td></tr>
<tr><td><code>module purge</code></td><td>unload all modules</td></tr>
<tr><td><code>module swap &lt;module_name&gt; &lt;module_name&gt;</code></td><td>swap two modules</td></tr>
</tbody></table>
<div style="break-before: page; page-break-before: always;"></div><h1 id="m3s-shared-filesystem"><a class="header" href="#m3s-shared-filesystem">M3's Shared Filesystem</a></h1>
<p>When we talk about a shared filesystem, what we mean is that the filesystem that M3 uses allows multiple users or systems to access, manage, and share files and directories over a network, concurrently. It enables users to collaborate on projects, share resources, and maintain a unified file structure across different machines and platforms. In addition to this, it enables the many different compute nodes in M3 to access data from a single source which users also have access to, simplifying the process of running jobs on M3.</p>
<p>Very simply, the way it works is that the home, project and scratch directories are mounted on every node in the cluster, so they are accessible from any node.</p>
<p>M3 has a unique filesystem consisting of three main important parts (for you).</p>
<h2 id="home-directory"><a class="header" href="#home-directory">Home Directory</a></h2>
<p>There is each user's personal directory, which only they have access to. This has a ~10GB allocation, and should store any hidden files, configuration files, or other files that you don't want to share with others. This is backed up nightly.</p>
<h2 id="project-directory"><a class="header" href="#project-directory">Project Directory</a></h2>
<p>This is the shared project directory, for all users in MDN to use. This has a ~1TB allocation, and should be used only for project specific files, scripts, and data. This is also backed up nightly, so in the case that you accidentally delete something important, it can be recovered.</p>
<h2 id="scratch-directory"><a class="header" href="#scratch-directory">Scratch Directory</a></h2>
<p>This is also shared with all users in MDN, and has more allocation (~3TB). You may use this for personal projects, but keep your usage low. In general it is used for temporary files, larger datasets, and should be used for any files that you don't need to keep for a long time. This is not backed up, so if you delete something, it's gone forever.</p>
<h2 id="general-rules"><a class="header" href="#general-rules">General Rules</a></h2>
<ul>
<li>Keep data usage to a minimum. If you have a large amount of data, consider moving it to the scratch directory. If it is not necessary to keep it, consider deleting it.</li>
<li>Keep your home directory clean.</li>
<li>In general, it is good practice to make a directory in the shared directory for yourself. Name this your username or name, to make it easily identifiable. This is where you should store your files for small projects or personal use.</li>
<li>The project directory is not for personal use. Do not store files in the project directory that are not related to MDN. Use the scratch directory instead.</li>
</ul>
<h2 id="copying-files-to-and-from-m3"><a class="header" href="#copying-files-to-and-from-m3">Copying files to and from M3</a></h2>
<p>Copying files to and from M3 can be done in a few different ways. We will go over the basics of scp, as well as setting up FileZilla. </p>
<p>A key thing to remember when copying files to and from M3 is that you shouldn't be using the regular ssh url. Instead, they have a dedicated SFTP url to use for file transfers. This is <code>m3-dtn.massive.org.au</code>. This is the url you will use when setting up FileZilla, and when using scp.</p>
<h3 id="using-scp"><a class="header" href="#using-scp">Using scp</a></h3>
<p>You can copy files to M3 using the <code>scp</code> command. This is a command line tool that is built into most linux distributions. If you are using Windows, you will need to install a tool like <a href="https://gitforwindows.org/">Git Bash</a> to use this command.</p>
<h4 id="linux--mac"><a class="header" href="#linux--mac">Linux / Mac</a></h4>
<p>To copy a file to M3, use the following command:</p>
<pre><code class="language-bash">scp &lt;file&gt; &lt;username&gt;@m3-dtn.massive.org.au:&lt;destination&gt;
</code></pre>
<p>For example, if I wanted to copy a file called <code>test.txt</code> to my home directory on M3, I would use the following command:</p>
<pre><code class="language-bash">scp test.txt jasparm@m3-dtn.massive.org.au:~
</code></pre>
<p>To copy a file from M3 to your local machine, use the following command:</p>
<pre><code class="language-bash">scp &lt;username&gt;@m3-dtn.massive.org.au:&lt;file&gt; &lt;destination&gt;
</code></pre>
<p>So, to bring that same file back to my local machine, I would use the following command:</p>
<pre><code class="language-bash">scp jasparm@m3-dtn.massive.org.au:~/test.txt .
</code></pre>
<h4 id="filezilla"><a class="header" href="#filezilla">FileZilla</a></h4>
<p>FileZilla is a SFTP client that the M3 staff recommend using. You can download it <a href="https://filezilla-project.org/download.php?show_all=1">here</a>.</p>
<p>Once installed, run the program and click on File -&gt; Site Manager or <code>Ctrl-S</code>. This will open the site manager. Click on New Site, and enter the following details:</p>
<ul>
<li>Protocol: SFTP</li>
<li>Host: <code>m3-dtn.massive.org.au</code></li>
<li>Logon Type: Ask for password</li>
<li>User: <code>&lt;your username&gt;</code></li>
</ul>
<p>Don't change anything else. Leave password blank for now.</p>
<p>It should look something like this:
<img src="chapter3/./imgs/filezilla_connect_m3.png" alt="Add M3 as a site" />
Click on Connect, and enter your password when prompted. You should now be connected to M3. You can now drag and drop files to and from M3.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="software-and-tooling"><a class="header" href="#software-and-tooling">Software and Tooling</a></h1>
<p>Software and development tooling is handled a little differently on M3 than you might be used to. In particular, because M3 is a shared file system, you do not have access to <code>sudo</code>, and you cannot install software on the system manually. Instead, you will need to use the <code>module</code> command to load software and development tools.</p>
<h2 id="module"><a class="header" href="#module">Module</a></h2>
<p>The <code>module</code> command is used kind of as an alternative to package managers like <code>apt</code> or <code>yum</code>, except it is managed by the M3 team. It allows you to load software and development tools into your environment, and is used to load software on M3. To see a comprehensive list of commands go <a href="chapter3/./linux-cmds.html#m3-specific-commands">here</a>.</p>
<p>In general, however, you will only really need to use <code>module load</code> and <code>module unload</code>. These commands are used to load and unload software and development tools into your environment.</p>
<p>For most of the more popular software packages, like gcc, there are multiple different versions available. You will need to specify which version you want to load based on your needs.</p>
<h2 id="c"><a class="header" href="#c">C</a></h2>
<h3 id="gcc"><a class="header" href="#gcc">GCC</a></h3>
<p>To load GCC, you can run the following command:</p>
<pre><code class="language-bash">module load gcc/10.2.0
</code></pre>
<p>This will load GCC 10.2.0 into your environment, and you can use it to compile C/C++ programs as described in the <a href="chapter3/../chapter2/intro-to-c.html">Intro to C</a> chapter. To unload GCC, you can run the following command:</p>
<pre><code class="language-bash">module unload gcc/10.2.0
</code></pre>
<h2 id="python"><a class="header" href="#python">Python</a></h2>
<p>Python is a bit of a special case on M3. This is because of how many different versions there are, as well as how many different packages are available. To make things easier, it is recommended that you use miniconda or anaconda to manage your python environments instead of using the system python.</p>
<p>These instructions are based off the M3 docs, which can be found <a href="https://docs.massive.org.au/M3/software/pythonandconda/pythonandconda.html#pythonandconda">here</a>.</p>
<h3 id="miniconda"><a class="header" href="#miniconda">Miniconda</a></h3>
<h4 id="installing-miniconda"><a class="header" href="#installing-miniconda">Installing Miniconda</a></h4>
<p>To install Miniconda on M3, there is a dedicated install script that you can use. This will install miniconda into your default scratch space, i.e. <code>/vf38_scratch/&lt;username&gt;/miniconda3</code>. To install miniconda, run the following command:</p>
<pre><code class="language-bash">module load conda-install

# To install miniconda to the default location 
conda-install

# To install miniconda to a custom location
conda-install your/install/location
</code></pre>
<h4 id="activating-miniconda"><a class="header" href="#activating-miniconda">Activating Miniconda</a></h4>
<p>To activate the base conda environment, run the following command:</p>
<pre><code class="language-bash">source your/install/location/miniconda/bin/activate
</code></pre>
<p>You will notice that once activated, <code>(base)</code> will appear in the prompt before your username.</p>
<p>To create and activate Python environments within Miniconda, follow these steps:</p>
<pre><code class="language-bash"># Create a new environment
# Change env-name to whatever you want to call your environment
conda create --name env-name python=&lt;version&gt;

# Activate the environment
conda activate env-name
</code></pre>
<h4 id="managing-python-packages"><a class="header" href="#managing-python-packages">Managing Python packages</a></h4>
<p>Use the following commands to install and manage Python packages:</p>
<pre><code class="language-bash"># Install a package
conda install package-name

# Update a package
conda update package-name

# You can also change the version of packages by adding a = and the version number

# Remove a package
conda remove package-name
</code></pre>
<h4 id="deactivating-miniconda"><a class="header" href="#deactivating-miniconda">Deactivating Miniconda</a></h4>
<p>To deactivate the conda environment you are in, run <code>conda deactivate</code>. To exit conda entirely run <code>conda deactivate</code> again. You will know you have fully exited conda when <code>(base)</code> is no longer in the prompt.</p>
<h3 id="vim"><a class="header" href="#vim">VIM</a></h3>
<p>VIM is a terminal based text editor. You may have heard about it, or even tried using it before. If so, you might recognise the common meme of &quot;how do I exit VIM???&quot;. This is because VIM uses a very different key binding system to other text editors, and it can be a little confusing to get used to. However, once you get used to it, it is actually a very powerful and efficient text editor.</p>
<p>I will attemt to give a brief overview of VIM commands, however you should really check out the <a href="https://vimhelp.org/">VIM documentation</a> if you want to learn more.</p>
<p>VIM also has a built in tutorial that you can access by running <code>:help</code> while in VIM.</p>
<p>To use VIM to edit a file, just type <code>vim &lt;filename&gt;</code> into the terminal. This will open the file in VIM. If the file does not exist, it will create a new file with that name.</p>
<p>VIM has three different modes. The first is the command mode, which is the default mode when you open a file. In this mode, you can navigate around the file, and perform other commands. The second is the insert mode, which is used to insert text into the file. The third is the visual mode, which is used to select text.</p>
<p>To enter the insert mode, press <code>i</code>. To exit the insert mode, press <code>esc</code>. To enter the visual mode, press <code>v</code>. To exit the visual mode, press <code>esc</code>.</p>
<p>In command mode, you move around using <code>h</code>, <code>j</code>, <code>k</code>, <code>l</code>. To move along words, press <code>w</code> or <code>b</code>. To move to the start or end of the line, press <code>0</code> or <code>$</code>. You can delete a line using <code>dd</code>, or delete a word using <code>dw</code>. You might be noticing some patterns here. In VIM, commands are made up of single or multiple characters that represent different things. For example, if I wanted to delete a word, I would press <code>d</code> to delete, and then <code>w</code> to delete a word. If I wanted to delete 3 words, I would press <code>d3w</code>. If I just wanted to change a word, I would press <code>c</code> instead of <code>d</code>. If I wanted to change 3 words, I would press <code>c3w</code>. If I wanted to change a line, I would press <code>cc</code>. Some other useful command mode commands are <code>u</code> to undo, <code>o</code> to insert a new line and go into insert mode, and <code>?</code> to search for a string.</p>
<p>To get to insert mode, there are a lots of different ways, but the most common are <code>i</code> to insert text before the cursor, <code>a</code> to insert text after the cursor, and <code>o</code> to insert a new line. The capital versions of these also do things. <code>I</code> inserts text at the start of the line, <code>A</code> inserts text at the end of the line, and <code>O</code> inserts a new line above the current line. To exit insert mode, press <code>esc</code>.</p>
<p>To get to visual mode, press <code>v</code>. In visual mode, you can select text using the same commands as in command mode. To delete the selected text, press <code>d</code>. To change the selected text, press <code>c</code>. To copy the selected text, press <code>y</code>. To paste press <code>p</code>. To exit visual mode, press <code>esc</code>.</p>
<p>To exit VIM itself, enter command mode, and then press <code>:q!</code>. This will exit VIM without saving any changes. To save and exit, press <code>:wq</code>. To save without exiting, press <code>:w</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bash-scripts"><a class="header" href="#bash-scripts">Bash Scripts</a></h1>
<p>Bash is both a command line interface and a scripting language. Linux commands are generally using Bash. Bash scripts are a series of commands that are executed in order. Bash scripts are useful for automating tasks that you do often, or for running a series of commands that you don't want to type out every time. In our case, Bash scripts are used for running jobs on M3.</p>
<p>In terms of use, Bash can encapsulate any command you would normally run in the terminal into a script that can be easily reused. For example you could have a script that automatically navigates to a directory and activates a virtual environment, or a script that compiles and runs a C program.</p>
<p>The basic syntax of a bash file is as follows:</p>
<pre><code class="language-bash">#!/bin/bash

# This is a comment

echo &quot;Hello World&quot;
</code></pre>
<p>We can save this file as <code>hello.sh</code> and run it using the following command: <code>source hello.sh</code>. This will print <code>Hello World</code> to the terminal.</p>
<p>Let's walk through the file. The first line is <code>#!/bin/bash</code>. This is called a shebang, and it tells the system that this file is a bash script. The second line is a comment, and is ignored by the system. The third line is the actual command that we want to run. In this case, we are using the <code>echo</code> command to print <code>Hello World</code> to the terminal.</p>
<p>Bash can do a lot more, including basic arithmetic, if statements, loops, and functions, however these are not really necesary for what we are doing. If you want to learn more about bash, you can find a good tutorial <a href="https://linuxconfig.org/bash-scripting-tutorial">here</a>.</p>
<p>For our use, the main things we need to be able to do are to run executables and files. We do this the exact same way as if manually running them in the terminal. For example, if we want to run a python script, we can do the following:</p>
<pre><code class="language-bash">#!/bin/bash

# This will run hello.py using the python3 executable
python3 hello.py
</code></pre>
<p>If we want to compile and then run a C program, we can do the following:</p>
<pre><code class="language-bash">#!/bin/bash

# This will compile hello.c and then run it
gcc hello.c -o hello
./hello
</code></pre>
<p>Using bash scripts not only saves a lot of time and effort, but it also makes it easier to run jobs on M3 using SLURM. We will go over how to do this in the next section.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="job-batching--slurm"><a class="header" href="#job-batching--slurm">Job batching &amp; SLURM</a></h1>
<p>Launching and running jobs on M3 is controlled by <a href="https://slurm.schedmd.com/">SLURM</a>. You don't really need to know a lot about it in order to use it, so this section will take you through the basics of what you will need for what we are doing.</p>
<p>If you want a complete guide on SLURM in M3, you can find it <a href="https://docs.massive.org.au/M3/slurm/slurm-overview.html">here</a>.</p>
<h2 id="submitting-simple-jobs"><a class="header" href="#submitting-simple-jobs">Submitting simple jobs</a></h2>
<p>As we discussed in the previous section we use bash scripts to run jobs on M3. We can submit these jobs using the <code>sbatch</code> command. For example, if we have a bash script called <code>hello.sh</code> that contains the following:</p>
<pre><code class="language-bash">#!/bin/bash

#SBATCH --ntasks=1
#SBATCH --mem=1MB
#SBATCH --time=0-00:01:00
#SBATCH --job-name=hello
#SBATCH --partition=m3i
#SBATCH --mail-user=jmar0066@student.monash.edu
#SBATCH --mail-type=BEGIN,END,FAIL

echo &quot;Hello World&quot;
</code></pre>
<p>We can submit this job using the following command:</p>
<p><code>sbatch hello.sh</code></p>
<p>This will submit the job to the queue, and you will get an email when the job starts, finishes, or fails. You can also check the status of your job using the <code>squeue</code> command.</p>
<h2 id="options"><a class="header" href="#options">Options</a></h2>
<p>You might have noticed the <code>#SBATCH</code> lines in the bash script. These are called options, and they tell SLURM how to run the job. The options we used in the example above are:</p>
<ul>
<li><code>ntasks</code>: The number of tasks or processes to run.</li>
<li><code>mem</code>: The amount of memory to allocate to the job.</li>
<li><code>time</code>: The maximum amount of time the job can run for.</li>
<li><code>job-name</code>: The name of the job. Up to 15 characters.</li>
<li><code>partition</code>: The partition to run the job on.</li>
<li><code>mail-user</code>: The email address to send job status emails to.</li>
<li><code>mail-type</code>: The types of emails to send.</li>
</ul>
<blockquote>
<p>Note: In the case of M3, a task is essentially the same as a process. This is <strong>not</strong> the same as a cpu core. You can have a task that uses one or multiple cores. You can also have multiple tasks comprising the same job, each with one or multiple cores being utilised. It can get quite confusing, so if you are unsure about what you need, just ask. There is also more information in the M3 docs.</p>
</blockquote>
<p>There are a lot more options that you can use, and you can find a more complete list <a href="https://docs.massive.org.au/M3/slurm/simple-batch-jobs.html">here</a>.</p>
<p>In particular, if you want to run multithreading or multiprocessing jobs, or you need a gpu, there are more options you need to configure.</p>
<h2 id="interactive-jobs"><a class="header" href="#interactive-jobs">Interactive jobs</a></h2>
<p>Sometimes you might want to actually connect to the node that you are running your job on, in order to see what is happening or to set it up before running the job. You can do this using the <code>smux</code> command. Similar to regular batch jobs, you can set options when you start the interactive session. An example of this is:</p>
<p><code>smux new-session --ntasks=1 --time=0-00:01:00 --partition=m3i --mem=4GB</code></p>
<p>This will start an interactive session on a node with 1 cpu, 1 minute of time, and 4GB of memory. There are again other options available, and you can find a more complete explanation <a href="https://docs.massive.org.au/M3/slurm/interactive-jobs.html">here</a>.</p>
<h3 id="connecting-to-interactive-jobs"><a class="header" href="#connecting-to-interactive-jobs">Connecting to interactive jobs</a></h3>
<p>Typically when you start an interactive job it will not start immediately. Instead, it will be queued up once it has started you will need to connect to it. You can do this by running <code>smux a</code>, which will reconnect you to the session. If you want to disconnect from the session but leave it running, you can press <code>Ctrl + b</code> followed by <code>d</code>. This will disconnect you from the session, but leave it running. You can reconnect to it later using <code>smux a</code>. If you want to kill the session, if you are connected just run <code>exit</code>, otherwise if you are in a login node run <code>scancel &lt;jobid&gt;</code>. You can find the job id using <code>show_job</code>.</p>
<h2 id="checking-the-status-of-jobs-finding-out-job-ids-and-killing-jobs"><a class="header" href="#checking-the-status-of-jobs-finding-out-job-ids-and-killing-jobs">Checking the status of jobs, finding out job IDs, and killing jobs</a></h2>
<p>A couple of useful commands for general housekeeping are:</p>
<ul>
<li><code>squeue</code>: This will show you the status of all jobs currently running on M3.</li>
<li><code>show_job</code>: This will show you the status of all jobs you have submitted.</li>
<li><code>squeue -u &lt;username&gt;</code>: This will show you the status of all jobs submitted by a particular user currently running.</li>
<li><code>scancel &lt;jobid&gt;</code>: This will kill a job with a particular job id.</li>
<li><code>scancel -u &lt;username&gt;</code>: This will kill all jobs submitted by a particular user.</li>
<li><code>show_cluster</code>: This will show you the status of the cluster, including any nodes that are offline or in maintenance.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="strudel"><a class="header" href="#strudel">Strudel</a></h1>
<p>STRUDEL is a web application used to connect to M3. There are two main benefits to this over regular ssh. Firstly, you are able to access a desktop session, so you can interact easier with M3, look at graphs, etc.. STRUDEL also enables the use of Jupyter notebooks, which are especially useful for data science and machine learning.</p>
<h2 id="accessing-strudel"><a class="header" href="#accessing-strudel">Accessing STRUDEL</a></h2>
<p>First, go to the <a href="https://beta.desktop.cvl.org.au/">STRUDEL</a> website. You should see something like this:</p>
<p><img src="chapter3/imgs/strudel1.png" alt="strudel select cvl" /></p>
<p>Select the CVL option, and you should be taken to another page, where you choose how to log in.</p>
<p><img src="chapter3/imgs/strudel2.png" alt="strudel login" /></p>
<p>Select AAF. On the next page, search for and select Monash University.</p>
<p><img src="chapter3/imgs/aaf_strudel.png" alt="AAF Login" /></p>
<p>You will now be taken to the Monash login page. Once you have logged in, it will show one last page, asking permission to use your details. Click allow, and you will be taken to the STRUDEL home page.</p>
<p><img src="chapter3/imgs/strudel_home.png" alt="strudel home page" /></p>
<h2 id="desktop-session"><a class="header" href="#desktop-session">Desktop Session</a></h2>
<p>To start a desktop session using STRUDEL, click on the <strong>Desktop</strong> tab on the side, select your desired options, and click launch. Once the session has started, you will be able to attach to it by clicking on the connect button in the <em>Pending / Running Desktops</em> section.</p>
<h2 id="jupyter-notebooks"><a class="header" href="#jupyter-notebooks">Jupyter Notebooks</a></h2>
<p>Similar to Desktops, if you want a basic Jupyter notebook, click on the <strong>Jupyter Lab</strong> tab, choose how much compute you want, and click launch.</p>
<p>If you want to have a more customised Jupyter notebook, you can do this by first sshing into M3, and activate conda. Then activate the conda environment <code>jupyterlab</code>. Install you desired packages in this environment. Once you have done this, go back to STRUDEL, and launch a <strong>Jupyter Lab - BYO</strong> session.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="m3-challenges"><a class="header" href="#m3-challenges">M3 Challenges</a></h1>
<h2 id="challenge-1"><a class="header" href="#challenge-1">Challenge 1</a></h2>
<p>Navigate to your scratch directory and, using vim (or your chosen in-terminal editor) create a file called <code>hello.txt</code> that contains the text &quot;Hello World&quot;. Once you have created the file, use the <code>cat</code> command to print the contents of the file to the screen.</p>
<h2 id="challenge-2"><a class="header" href="#challenge-2">Challenge 2</a></h2>
<p>Write a bash script that prints the contents of the above hello.txt file to the screen and run it locally (on your login node).</p>
<h2 id="challenge-3"><a class="header" href="#challenge-3">Challenge 3</a></h2>
<p>Submit the above script to the queue by writing another SLURM bash script. Check the status of the job using <code>squeue</code>. Once the job has finished, check the output using <code>cat</code>. You can find the output file in the directory you submitted the job from.</p>
<h2 id="challenge-4"><a class="header" href="#challenge-4">Challenge 4</a></h2>
<p>Request an interactive node and attach to it. Once you have done this, install python 3.7 using conda.</p>
<h2 id="challenge-5"><a class="header" href="#challenge-5">Challenge 5</a></h2>
<p>Clone and run <a href="chapter3/./dl_on_m3/alexnet_stl10.py">this</a> script. You will need to first install the dependencies for it. You don't need to wait for it to finish, just make sure it is working. You will know its working if it starts listing out the loss and accuracy for each epoch. You can stop it by pressing <code>ctrl + c</code>.</p>
<p>Once you have confirmed that it is working, deactivate and delete the conda environment, and then end the interactive session.</p>
<blockquote>
<p>Hint: I have included the dependencies and their versions (make sure you install the right version) in the <code>requirements.txt</code> file. You will need python 3.7 to run this script.</p>
</blockquote>
<h2 id="challenge-6"><a class="header" href="#challenge-6">Challenge 6</a></h2>
<p>Go back to the login node. Now you are going to put it all together. Write a bash script that does the following:</p>
<ul>
<li>(1) requests a compute node</li>
<li>(2) installs python using conda</li>
<li>(3) clones and runs the above script</li>
</ul>
<p>Let this run fully. Check the output of the script to make sure it ran correctly. Does it match the output of the script you ran in challenge 5?</p>
<blockquote>
<p>Hint: You can check the output of the script at any time by <code>cat</code>ing the output file. The script does not need to have finished running for you to do this.</p>
</blockquote>
<h2 id="challenge-7"><a class="header" href="#challenge-7">Challenge 7</a></h2>
<p>Edit your submission script so that you get a gpu node, and run the script using the gpu.</p>
<blockquote>
<p>Hint: Use the m3h partition</p>
</blockquote>
<h2 id="challenge-8"><a class="header" href="#challenge-8">Challenge 8</a></h2>
<p>Now you want to clean up your working directory. First, push your solutions to your challenges repo. Then, delete the challenges directory, as well as the conda environment you created in challenge 6.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="parallel-computing"><a class="header" href="#parallel-computing">Parallel Computing</a></h1>
<p>In this chapter we discuss parallel computing and its uses in developing fast applications. We then look at how OpenMP allows us to parallelize or code to make it faster.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="introduction-to-parallel-computing"><a class="header" href="#introduction-to-parallel-computing">Introduction to Parallel Computing</a></h1>
<h2 id="what-is-parallel-computing"><a class="header" href="#what-is-parallel-computing">What is Parallel Computing?</a></h2>
<p>Parallel computing is about executing the instructions of the program simultaneously</p>
<p>One of the core values of computing is the breaking down of a big problem into smaller easier to solve problems, or at least smaller problems.</p>
<p>In some cases, the steps required to solve the problem can be executed simultaneously (in parallel) rather than sequentially (in order)</p>
<p>A supercomputer is not just about fast processors. It is multiple processors working together in simultaneously. Therefore it makes sense to utilise parallel computing in the HPC environment, given the access to large numbers of processors</p>
<p><img src="chapter4/imgs/Running%20Processes%20in%20Parallel.png" alt="Running Processes in Parallel" /></p>
<p>An example of parallel computing looks like this. </p>
<p><img src="chapter4/imgs/Parallel%20Computing%20Example.png" alt="Parallel Computing Example" /></p>
<p>Here there is an array which contains numbers from 0 to 999. The program is to increment each values by 1. Comparing serial code on left and parallel code on right, parallel code is utilising 4 cores of a CPU. Therefore, it can expect approximately 4 times speed up from just using 1 core, what we are seeing here is how the same code can in-fact execute faster as four times as many elements can be updated in the same time one would be.</p>
<h2 id="parallel-computing-memory-architectures"><a class="header" href="#parallel-computing-memory-architectures">Parallel Computing Memory Architectures</a></h2>
<p>Parallel computing has various memory architectures</p>
<h3 id="shared-memory-architecture"><a class="header" href="#shared-memory-architecture">Shared Memory Architecture:</a></h3>
<p>There is shared memory architectures where multiple CPUs runs on the same server. OpenMP uses this model</p>
<p><img src="chapter4/imgs/Shared%20Memory%20Architecture.png" alt="Shared Memory Architecture" /></p>
<h3 id="distributed-memory-architecture"><a class="header" href="#distributed-memory-architecture">Distributed Memory Architecture:</a></h3>
<p>This distributed memory architecture where CPU and memory are bundled together and works by communicating with other nodes. Message passing protocol called lMPI is used in this model</p>
<p><img src="chapter4/imgs/Distributed%20Memory%20Architecture.png" alt="Distributed Memory Architecture" /></p>
<h3 id="hybrid-parallel-programming"><a class="header" href="#hybrid-parallel-programming">Hybrid Parallel Programming:</a></h3>
<p>For High Performance Computing (HPC) applications, OpenMP is combined with MPI. This is often referred to as Hybrid Parallel Programming. </p>
<p><img src="chapter4/imgs/Hybrid%20Parallel%20Programming.png" alt="Hybrid Parallel Programming" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="multithreading-on-hpc"><a class="header" href="#multithreading-on-hpc">Multithreading on HPC</a></h1>
<h2 id="thread-vs-process"><a class="header" href="#thread-vs-process">Thread vs Process</a></h2>
<p><img src="chapter4/imgs/Thread%20vs%20Processes.png" alt="Thread vs Processes" /></p>
<p>When computer runs a program, your source code is loaded into RAM and process is started.
A <strong>process</strong> is a collection of code, memory, data and other resources.
A process runs in a unique address space. So Two processes can not see each other’s memory. </p>
<p>A <strong>thread</strong> is a sequence of code that is executed inside the scope of the <strong>process</strong>. You can (usually) have multiple <strong>threads</strong> executing concurrently within the same process. 
<strong>Threads</strong>  can view the memory (i.e. variables) of other threads within the same process</p>
<p>A <strong>multiprocessing</strong> system has more than two processors, whereas <strong>multithreading</strong> is a program execution technique that allows a single process to have multiple code segments. </p>
<h2 id="architecture-of-a-hpc-cluster-massive"><a class="header" href="#architecture-of-a-hpc-cluster-massive">Architecture of a HPC Cluster (Massive)</a></h2>
<p><img src="chapter4/imgs/Slurm%20Architecture.png" alt="Slurm Architecture" /></p>
<p>The key in HPC is to write a parallel computing code that utilise multiple nodes at the same time. essentially, more computers faster your application</p>
<h2 id="using-massive"><a class="header" href="#using-massive">Using Massive</a></h2>
<h3 id="find-available-partition"><a class="header" href="#find-available-partition">Find Available Partition</a></h3>
<p>Command: </p>
<pre><code class="language-bash">show_cluster
</code></pre>
<p><img src="chapter4/imgs/show_cluster%20Command.png" alt="show_cluster Command" /></p>
<p>Before you run your job, it’s important to check the available resources.</p>
<p><code>show_cluster</code> is a good command to check the available resources such as CPU and Memory. Make sure to also check the status of the of the node, so that your jobs get started without waiting</p>
<h3 id="sending-jobs"><a class="header" href="#sending-jobs">Sending Jobs</a></h3>
<p>Command: </p>
<pre><code class="language-bash">#SBATCH --flag=value
</code></pre>
<p><img src="chapter4/imgs/sbatch%20Command.png" alt="sbatch Command" /></p>
<p>Here is the example of shell script for running multi-threading job
<code>#sbatch</code> specifies resources and then it runs the executable named hello.</p>
<p><code>#sbatch</code> tasks specifies how many processes to run 
Cpus per task is pretty self explanatory, it specifies how many cpu cores you need to run a process, this will be the number of threads used in the job
And make sure to specify which partition you are using</p>
<h3 id="monitor-jobs"><a class="header" href="#monitor-jobs">Monitor Jobs</a></h3>
<p>Command: </p>
<pre><code class="language-bash">squeue
# or
squeue -u &lt;username&gt;
</code></pre>
<p><img src="chapter4/imgs/squeue%20Command.png" alt="squeue Command" /></p>
<p>After you submitted your job, you can use the command squeue to monitor your job 
you can see the status of your job to check whether it’s pending or running and also how long has it been since the job has started. </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="parallel-computing-with-openmp"><a class="header" href="#parallel-computing-with-openmp">Parallel Computing with OpenMP</a></h1>
<h2 id="what-is-openmp"><a class="header" href="#what-is-openmp">What is OpenMP</a></h2>
<p>OpenMP, stand for open multi-processing is an API for writing multithreaded applications</p>
<p>It has a set of compiler directives and library routines for parallel applications, and it greatly simplifies writing multi-threaded code in Fortran, C and C++.</p>
<p>Just few lines of additional code can make your application parallel </p>
<p>OpenMP uses shared memory architecture. It assumes all code runs on a single server</p>
<h2 id="threads"><a class="header" href="#threads">Threads</a></h2>
<p><img src="chapter4/imgs/Threads%20Visualisation.png" alt="Threads Visualisation" /></p>
<p>A thread of execution is the smallest instruction that can be managed independently by an operating system.</p>
<p>In parallel region, multiple threads are spawned and utilises the cores on CPU</p>
<blockquote>
<p>Only one thread exists in a serial region</p>
</blockquote>
<h2 id="openmp-compiler-directives"><a class="header" href="#openmp-compiler-directives">OpenMP Compiler Directives</a></h2>
<p>Recall compiler directives in C; particularly the <code>#pragma</code> directive. These can be used to create custom functionality for a compiler and enable specialized features in-code. </p>
<p><code>#pragma</code> is a preprocessor directive that is used to provide additional information to the compiler beyond the standard language syntax. It allows programmers to give hints or directives to the compiler, which the compiler can use to optimize the code or to use specific compiler features or extensions.</p>
<p>The <code>#pragma</code> directive is followed by a keyword that specifies the type of pragma and any additional parameters or options that are needed. For example, the <code>#pragma omp</code> directive is used in OpenMP parallel programming to provide hints to the compiler about how to parallelize code. Here are some examples of <code>#pragma</code> directives:</p>
<ul>
<li><code>#pragma once</code>: This is a commonly used pragma in C and C++ header files to ensure that the header file is included only once in a compilation unit. This can help to prevent errors that can occur when the same header file is included multiple times.</li>
<li><code>#pragma message</code>: This pragma is used to emit a compiler message during compilation. This can be useful for providing additional information to the programmer or for debugging purposes.</li>
<li><code>#pragma warning</code>: This pragma is used to control compiler warnings. It can be used to turn specific warnings on or off, or to change the severity of warnings.</li>
<li><code>#pragma pack</code>: This pragma is used to control structure packing in C and C++. It can be used to specify the alignment of structure members, which can affect the size and layout of structures in memory.</li>
<li><code>#pragma optimize</code>: This pragma is used to control code optimization. It can be used to specify the level of optimization, or to turn off specific optimizations that may be causing problems.</li>
</ul>
<p>It is important to note that <code>#pragma</code> directives are compiler-specific, meaning that different compilers may interpret them differently or may not support certain directives at all. It is important to check the documentation for a specific compiler to understand how it interprets <code>#pragma</code> directives.</p>
<p>OpenMP provides a set of <code>#pragma</code> directives that can be used to specify the parallelization of a particular loop or section of code. For example, the <code>#pragma omp parallel</code> directive is used to start a parallel region, where multiple threads can execute the code concurrently. The <code>#pragma omp for</code> directive is used to parallelize a loop, with each iteration of the loop being executed by a different thread.</p>
<p>Here's an example of how <code>#pragma</code> directives can be used with OpenMP to parallelize a simple loop:</p>
<pre><code class="language-c">#include &lt;omp.h&gt;
#include &lt;stdio.h&gt;

int main() {
    int i;
    #pragma omp parallel for
    for (i = 0; i &lt; 10; i++) {
        printf(&quot;Thread %d executing iteration %d\n&quot;, omp_get_thread_num(), i);
    }
    return 0;
}
</code></pre>
<p>Use <code>gcc -fopenmp</code> to compile your code when you use <code>#pragma</code></p>
<h2 id="compile-openmp"><a class="header" href="#compile-openmp">Compile OpenMP</a></h2>
<ol>
<li>Add <code>#include &lt;omp.h&gt; if you are using OpenMP function</code></li>
<li>Run <code>gcc -fopenmp -o hello hello.c</code></li>
</ol>
<h2 id="how-it-works"><a class="header" href="#how-it-works">How it works</a></h2>
<p><img src="chapter4/imgs/OpenMP%20and%20Directive.png" alt="OpenMP and Directive" />
<a href="https://www.researchgate.net/figure/OpenMP-API-The-master-thread-is-indicated-with-T-0-while-inside-the-parallel-region_fig3_329536624">Source</a></p>
<p>Here is an example of <code>#pragma</code></p>
<ul>
<li>The function starts with serial region</li>
<li>At the line <code>#pragma omp parallel</code>, a group of threads are spawned to create parallel region inside the bracket </li>
<li>At the end of the bracket, the program goes back to serial computing </li>
</ul>
<h2 id="running-hello-world-on-multi-threads"><a class="header" href="#running-hello-world-on-multi-threads">Running &quot;Hello World&quot; on Multi-threads</a></h2>
<blockquote>
<p>If you're unsure about the difference between <strong>multi-threading</strong> and <strong>multi-processing</strong>, check the page <a href="chapter4/multithreading.html">here</a></p>
</blockquote>
<p><strong>Drawing in Serial (Left) vs Parallel (Right)</strong>
<img src="chapter4/imgs/4%20Parallel%20Computing%20OpenMP.gif" alt="" /></p>
<p>Drawing in serial versus drawing in parallel, you can see how we can place one pixel at a time and take a long time to make the drawing, but on the right hand side if we choose to load and place four pixels down simultaneously we can get the picture faster, however during the execution it can be hard to make out what the final image will be, given we don’t know what pixel will be placed where in each execution step.</p>
<p>Now this is obviously a fairly abstract analogy compared to exactly what’s happening under the hood, however if we go back to the slide diagram containing zones of multiple threads and serial zones, some parts of a program must be serial as if this program went further and drew a happy face and then a frown face, drawing both at the same time is not useful to the program, yes it would be drawn faster but the final image won’t make sense or achieve the goal of the program.</p>
<h2 id="how-many-threads-you-can-dynamically-change-it"><a class="header" href="#how-many-threads-you-can-dynamically-change-it">How many threads? You can dynamically change it</a></h2>
<p><strong><code>omp_set_num_threads()</code> Library Function</strong>
Value is set inside program. Need to recompile program to change</p>
<p><strong><code>OMP_NUM_THREADS</code> Environment Variable</strong></p>
<pre><code class="language-bash">export OMP_NUM_THREADS=4 
./hello
</code></pre>
<p>The operating system maps the threads to available hardware. You would not normally want to exceed the number of cores/processors available to you.</p>
<h2 id="measuring-performance"><a class="header" href="#measuring-performance">Measuring Performance</a></h2>
<p>The command <code>top</code> or <code>htop</code> looks into a process. As you can see from the image on right, it shows the CPU usages.</p>
<p><img src="chapter4/imgs/Top%20Command.png" alt="Top Command" /></p>
<p>The command <code>time</code> checks the overall performance of the code.</p>
<p><img src="chapter4/imgs/Time%20Command.png" alt="Time Command" /></p>
<p>By running this command, you get real time, user time and system time.</p>
<p><strong>Real</strong> is wall clock time - time from start to finish of the call. This includes the time of overhead</p>
<p><strong>User</strong> is the amount of CPU time spent outside the kernel within the process</p>
<p><strong>Sys</strong> is the amount of CPU time spent in the kernel within the process. 
<strong>User</strong> time + <strong>Sys</strong> time will tell you how much actual CPU time your process used. </p>
<h2 id="more-features-of-openmp"><a class="header" href="#more-features-of-openmp">More Features of OpenMP</a></h2>
<ul>
<li><a href="https://www.youtube.com/watch?v=iPb6OLhDEmM&amp;list=PLLX-Q6B8xqZ8n8bwjGdzBJ25X2utwnoEG&amp;index=11">YouTube Video: Introduction to OpenMP</a></li>
<li><a href="https://www.youtube.com/watch?v=dlrbD0mMMcQ&amp;list=PLLX-Q6B8xqZ8n8bwjGdzBJ25X2utwnoEG&amp;index=17">YouTube Video: Data environment -#pragma omp parallel private</a></li>
<li><a href="https://www.youtube.com/watch?v=iPb6OLhDEmM&amp;list=PLLX-Q6B8xqZ8n8bwjGdzBJ25X2utwnoEG&amp;index=11">YouTube Video: Parallel Loops - #omp parallel for reduction()</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="parallel-computing-challenges"><a class="header" href="#parallel-computing-challenges">Parallel Computing Challenges</a></h1>
<h2 id="overview-1"><a class="header" href="#overview-1">Overview</a></h2>
<ul>
<li><a href="chapter4/challenges.html#parallel-computing-challenges">Parallel Computing Challenges</a>
<ul>
<li><a href="chapter4/challenges.html#overview">Overview</a></li>
<li><a href="chapter4/challenges.html#pre-tasks">Pre-Tasks</a></li>
<li><a href="chapter4/challenges.html#task-1---single-cluster-job-using-openmp">Task 1 - Single Cluster Job using OpenMP</a></li>
<li><a href="chapter4/challenges.html#task-2---parallel-for-loop">Task 2 - Parallel <code>for</code> Loop</a></li>
<li><a href="chapter4/challenges.html#task-3---parallel-reductions">Task 3 - Parallel Reductions</a></li>
<li><a href="chapter4/challenges.html#task-4---laplace-equation-for-calculating-the-temperature-of-a-square-plane">Task 4 - Laplace Equation for Calculating the Temperature of a Square Plane</a></li>
<li><a href="chapter4/challenges.html#task-5---calculate-pi-using-monte-carlo-algorithm">Task 5 - Calculate Pi using &quot;Monte Carlo Algorithm&quot;</a></li>
</ul>
</li>
</ul>
<h2 id="pre-tasks"><a class="header" href="#pre-tasks">Pre-Tasks</a></h2>
<p>Make sure to clone a copy of <strong>your</strong> challenges repo onto M3, ideally in a personal folder on vf38_scratch.</p>
<blockquote>
<p>Note: For every challenge you will be running the programs as SLURM jobs. This is so we don't overload the login nodes. A template <a href="chapter4/./job.slurm">SLURM job script</a> is provided at the root of this directory which you can use to submit your own jobs to SLURM by copying it to each challenges sub-directory and filling in the missing details. You may need more than one for some challenges. This template will put the would-be-printed output in a file named <code>slurm-&lt;job-name&gt;.out</code>.</p>
</blockquote>
<h2 id="task-1---single-cluster-job-using-openmp"><a class="header" href="#task-1---single-cluster-job-using-openmp">Task 1 - Single Cluster Job using OpenMP</a></h2>
<p>Create a program in <code>hello.c</code> that prints 'Hello, world from thread: <thread-number>' to the output. Launch the job to a node SLURM.</p>
<blockquote>
<p>Note:</p>
<ul>
<li>The output of a job is put in a slurm-<job-id>.out file by default.</li>
<li>The template slurm job scripts will output the results to a <code>slurm-&lt;job-name&gt;.out</code> file.</li>
</ul>
</blockquote>
<h2 id="task-2---parallel-for-loop"><a class="header" href="#task-2---parallel-for-loop">Task 2 - Parallel <code>for</code> Loop</a></h2>
<p>In <code>array-gen.c</code> implement a program that generates an array containing the numbers 0..10'000 elements (inclusive) using a <code>for</code> loop. Measure the execution time using the <code>time</code> Linux command. Now reimplement the program to utilise OpenMP's parallel <code>for</code> loop macros, measuring the execution time again. Is there any performance improvement? Are the elements still in the correct order and if not how can you fix this. Try experimenting with different sized arrays and element types.</p>
<blockquote>
<p>Hint: You will likely need to allocate memory from the heap.</p>
</blockquote>
<h2 id="task-3---parallel-reductions"><a class="header" href="#task-3---parallel-reductions">Task 3 - Parallel Reductions</a></h2>
<p>In the C chapter we created a sum program that summed the elements of an array together. Using this as a base, create a new program that again computes the sum of the elements of an array but using OpenMP, comparing the execution time between the sequential and parallel versions. Is there any performance improvement? How would using a different binary operator change our ability to parallelize the the reduction?</p>
<p>If you have time, implement the sum but at each iteration, raise the current value to the power of the current accumulation divide by 100, adding this to the accumulation. Test a serial and parallel version. Is the parallel any faster?</p>
<blockquote>
<p>Note: <code>module load gcc</code> to use newer version of gcc if you have error with something like <code>-std=c99</code>.</p>
</blockquote>
<h2 id="task-4---laplace-equation-for-calculating-the-temperature-of-a-square-plane"><a class="header" href="#task-4---laplace-equation-for-calculating-the-temperature-of-a-square-plane">Task 4 - Laplace Equation for Calculating the Temperature of a Square Plane</a></h2>
<p>For this challenge you will attempt to parallelize an existing implementation of the Laplace Equation. Throughout the source files of this project there are various loops you can try and make faster by utilizing OpenMP macros. See if you can make a faster version in the <code>laplace2d-parallel.c</code>. To build these files make sure you're in that directory and use the command <code>make</code>. The executables will be in the same directory.</p>
<h2 id="task-5---calculate-pi-using-monte-carlo-algorithm"><a class="header" href="#task-5---calculate-pi-using-monte-carlo-algorithm">Task 5 - Calculate Pi using &quot;Monte Carlo Algorithm&quot;</a></h2>
<p>For this challenge you will have to try and implement the Monte Carlo algorithm with no framework or template and using everything you've learnt so far. Good luck.</p>
<p><a href="https://www.youtube.com/watch?v=7ESK5SaP-bc&amp;ab_channel=MarbleScience">Short explanation of Monte Carlo algorithm</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="distributed-computing"><a class="header" href="#distributed-computing">Distributed Computing</a></h1>
<ul>
<li><a href="chapter5/parallel-refresher.html">Refresher on Parallelism</a></li>
<li><a href="chapter5/distributed-computing.html">What is Distributed Computing</a></li>
<li><a href="chapter5/openmpi.html">OpenMPI</a></li>
<li><a href="chapter5/message-passing.html">Message Passing</a></li>
<li><a href="chapter5/challenges.html">Challenges</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="refresher-on-parallelism"><a class="header" href="#refresher-on-parallelism">Refresher on Parallelism</a></h1>
<h2 id="task-parallelism"><a class="header" href="#task-parallelism">Task Parallelism</a></h2>
<p>We saw in the last chapter parallel computing can be used to solve problems by executing code in parallel as opposed to in series.</p>
<p><img src="chapter5/imgs/task_parallelism.jpg" alt="Task parallelism" /></p>
<h2 id="data-parallelism"><a class="header" href="#data-parallelism">Data Parallelism</a></h2>
<p>Note that not all programs can be broken down into independent tasks and we might instead data parallelism like the following.</p>
<p><img src="chapter5/imgs/data_parallelism.jpg" alt="Data parallelism" /></p>
<h2 id="parallel-computing-example"><a class="header" href="#parallel-computing-example">Parallel computing example</a></h2>
<p>Think back to the example below which was provided in the last chapter. We will look at the cost of memory transactions soon.</p>
<p><img src="chapter5/imgs/parallel_computing_arrays_eg.png" alt="Parallel computing example" /></p>
<h2 id="parallel-scalability"><a class="header" href="#parallel-scalability">Parallel Scalability</a></h2>
<p>The speed up achieved from parallelism is dictated by your algorithm. Notably the serial bits of your algorithm can not be sped up by increasing the number of processors. The diagram below looks at the benefits we can achieve from writing parallel code as the number of processes increases.</p>
<p><img src="chapter5/imgs/parallel_scalability.jpg" alt="Parallel scalability" /></p>
<h2 id="memory-architectures"><a class="header" href="#memory-architectures">Memory Architectures</a></h2>
<p>Lastly, the different memory architectures we looked at in the last section included shared memory, distributed memory and hybrid architectures. We have looked at shared memory in detail and now we will dive into distributed memory architecture.</p>
<p><img src="chapter5/imgs/memory_architectures.jpg" alt="Memory architectures" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="what-is-distributed-computing"><a class="header" href="#what-is-distributed-computing">What is Distributed Computing</a></h1>
<p><strong>Distributed computing is parallel execution on distributed memory architecture.</strong></p>
<p>This essentially means it is a form of parallel computing, where the processing power is spread across multiple machines in a network rather than being contained within a single system. In this memory architecture, the problems are broken down into smaller parts, and each machine is assigned to work on a specific part.</p>
<p><img src="chapter5/imgs/distributed_memory_architecture.png" alt="distributed memory architecture" /></p>
<h2 id="distributed-memory-architecture-1"><a class="header" href="#distributed-memory-architecture-1">Distributed Memory Architecture</a></h2>
<p>Lets have a look at the distributed memory architecture in more details.</p>
<ul>
<li>Each processor has its own local memory, with its own address space</li>
<li>Data is shared via a communications network using a network protocol, e.g Transmission Control Protocol (TCP), Infiniband etc..</li>
</ul>
<p><img src="chapter5/imgs/distributed_memory_architecture_2.png" alt="Distributed Memory Architecture" /></p>
<h2 id="distributed-vs-shared-program-execution"><a class="header" href="#distributed-vs-shared-program-execution">Distributed vs Shared program execution</a></h2>
<p>The following diagram provides another way of looking at the differences between distributed and shared memory architecture and their program execution.</p>
<p><img src="chapter5/imgs/distributed_vs_shared.png" alt="Distributed vs Shared" /></p>
<h2 id="advantages-of-distributed-computing"><a class="header" href="#advantages-of-distributed-computing">Advantages of distributed computing</a></h2>
<p>There are number of benefits to distributed computing in particular it addresses some shortcomings of shared memory architecture.</p>
<ul>
<li>No contention for shared memory since each machine has its own memory. Compare this to shared memory architecture where all the cpu's are sharing the same memory.</li>
<li>Highly scalable as we can add more machines and are not limited by RAM.</li>
<li>Effectively resulting in being able to handle large-scale problems</li>
</ul>
<p>The benefits above do not come without some drawbacks including network overhead.</p>
<h2 id="disadvantages-of-distributed-computing"><a class="header" href="#disadvantages-of-distributed-computing">Disadvantages of distributed computing</a></h2>
<ul>
<li>Network overload. Network can be overloaded by:
<ul>
<li>Multiple small messages</li>
<li>Very large data throughput</li>
<li>Multiple all-to-all messages ($N^2$ growth of messages)</li>
</ul>
</li>
<li>Synchronization failures
<ul>
<li>Deadlock (processes waiting for an input from another process that never comes)</li>
<li>Livelock (even worse as it’s harder to detect. All processes shuffling data around but not progressing in the algorithm )</li>
</ul>
</li>
<li>More complex software architecture design.
<ul>
<li>Can also be combined with threading-technologies as openMP/pthreads for optimal performance.</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="message-passing"><a class="header" href="#message-passing">Message Passing</a></h1>
<p>As each processor has its own local memory with its own address space in distributed computing, we need a way to communicate between the processes and share data. Message passing is the mechanism of exchanging data across processes. Each process can communicate with one or more other processes by sending messages over a network.</p>
<p>The MPI (message passing interface) in OpenMPI is a communication protocol standard defining message passing between processors in distributed environments and are implemented by different groups with the main goals being high performance, scalability, and portability.</p>
<p>OpenMPI is one implementation of the MPI standard. It consists of a set of headers library functions that you call from your program. i.e. C, C++, Fortran etc.</p>
<p>For C, you will need a header file for all the functions (mpi.h) and link in the relevant library functions. This is all handled by the mpicc program (or your compiler if you wanted to specify all the paths).</p>
<p>In the next chapter we will look at how to implement message passing using OpenMPI.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="openmpi"><a class="header" href="#openmpi">OpenMPI</a></h1>
<h2 id="primary-mpi-routines"><a class="header" href="#primary-mpi-routines">Primary MPI Routines</a></h2>
<pre><code class="language-C">int MPI_Init(int * argc, char ** argv);
// initializes the MPI environment.
// Argc argv are the parameters come
// from main(argc,argv). The return value is an
// error code. 0 is OK. Non-zero is an error code
</code></pre>
<pre><code class="language-C">int MPI_Comm_size(MPI_Comm comm, int \* size);
// this functions gets the number of MPI processes
// i.e. the number you enter when you go mpirun -np \&lt;size&gt; myprog.exe
// *size is C syntax indicating that size will be modified to contain
// the value after the function returns. The return value is only used
// for error detection. printf(“MPI size is %d\n”,size);
int MPI_Comm_rank(MPI_Comm comm, int \* rank);
// this returns the rank of this particular process
// rank contains the value for that process- the function return value is an error code
</code></pre>
<p><img src="chapter5/imgs/mpi_routines.png" alt="MPI routines" /></p>
<h3 id="point-to-point-communication"><a class="header" href="#point-to-point-communication">Point-to-Point communication</a></h3>
<p>These are blocking functions - they wait until the message is sent or received. Note that the CPU is actively polling the network interface when waiting for a message. This is opposite in behaviour to other C functions, i.e. c= getChar() (which causes a context switch and then a sleep in the OS). This is done for speed reasons.</p>
<pre><code class="language-C">int MPI_Send(void * buf, int count, MPI_Datatype type, int dest, int tag, MPI_Comm comm);
</code></pre>
<p>Sends a message from the calling process to another process</p>
<p>INPUT PARAMETERS</p>
<ul>
<li><code>buf</code>
<ul>
<li>Initial address of send buffer (choice).</li>
</ul>
</li>
<li><code>count</code>
<ul>
<li>Number of elements sent (non negative integer).</li>
</ul>
</li>
<li><code>type</code>
<ul>
<li>DataType of each send buffer element (handle).</li>
</ul>
</li>
<li><code>dest</code>
<ul>
<li>Rank of destination (integer).</li>
</ul>
</li>
<li><code>tag</code>
<ul>
<li>Message tag (integer).</li>
</ul>
</li>
<li><code>comm</code>
<ul>
<li>Communicator (handle).</li>
</ul>
</li>
</ul>
<p>OUTPUT PARAMETER</p>
<ul>
<li><code>IERROR</code>
<ul>
<li>Fortran only: Error status (integer).</li>
</ul>
</li>
</ul>
<pre><code class="language-c">int MPI_Recv(void * buf, int count, MPI_Datatype type, int source, int tag, MPI_Comm comm, MPI_Status * status);
</code></pre>
<p>Receives a message from another process</p>
<p>INPUT PARAMETERS</p>
<ul>
<li><code>count</code>
<ul>
<li>Maximum number of elements to receive (integer).</li>
</ul>
</li>
<li><code>type</code>
<ul>
<li>DataType of each receive buffer entry (handle).</li>
</ul>
</li>
<li><code>source</code>
<ul>
<li>Rank of source (integer).</li>
</ul>
</li>
<li><code>tag</code>
<ul>
<li>Message tag (integer).</li>
</ul>
</li>
<li><code>comm</code>
<ul>
<li>Communicator (handle).</li>
</ul>
</li>
</ul>
<p>OUTPUT PARAMETERS</p>
<ul>
<li><code>buf</code>
<ul>
<li>Initial address of receive buffer (choice).</li>
</ul>
</li>
<li><code>status</code>
<ul>
<li>Status object (status).</li>
</ul>
</li>
<li><code>IERROR</code>
<ul>
<li>Fortran only: Error status (integer).</li>
</ul>
</li>
</ul>
<h3 id="primary-mpi-routines-closing"><a class="header" href="#primary-mpi-routines-closing">Primary MPI Routines closing</a></h3>
<p>In a header file you will find</p>
<pre><code class="language-C">int MPI_Finalize(void);
</code></pre>
<p>To call in your C or C++ program</p>
<pre><code class="language-C">#include &lt;mpi.h&gt;
MPI_Finalize();
</code></pre>
<h2 id="general-overview-mpi-program"><a class="header" href="#general-overview-mpi-program">General overview MPI program</a></h2>
<pre><code class="language-C">...
int MPI_Init(int  argc, char ** argv);
--------------------------Parallel algorithm starts----------------------
int MPI_Comm_size(MPI_Comm comm, int * size);
int MPI_Comm_rank(MPI_Comm comm, int * rank);
...
int MPI_Send(void * buf, int count, MPI_Datatype type, int dest, int tag, MPI_Comm comm);
int MPI_Recv(void * buf, int count, MPI_Datatype type, int source, int tag, MPI_Comm comm, MPI_Status * status);
…
--------------------------Parallel algorithm ends-----------------------
int MPI_Finalize(void);
...

</code></pre>
<p>Use man pages to find out more about each routine</p>
<p>When sending a Process it packs up all of its necessary data into a buffer for the receiving process. These buffers are often referred to as envelopes since the data is being packed into a single message before transmission (similar to how letters are packed into envelopes before transmission to the post office)</p>
<h2 id="elementary-mpi-data-types"><a class="header" href="#elementary-mpi-data-types">Elementary MPI Data types</a></h2>
<p>MPI_Send and MPI_Recv utilize MPI Datatypes as a means to specify the structure of a message at a higher level. The data types defined in the table below are simple in nature and for custom data structures you will have to define the structure.</p>
<table><thead><tr><th>MPI datatype</th><th>C equivalent</th></tr></thead><tbody>
<tr><td>MPI_SHORT</td><td>short int</td></tr>
<tr><td>MPI_INT</td><td>int</td></tr>
<tr><td>MPI_LONG</td><td>long int</td></tr>
<tr><td>MPI_LONG_LONG</td><td>long long int</td></tr>
<tr><td>MPI_UNSIGNED_CHAR</td><td>unsigned char</td></tr>
<tr><td>MPI_UNSIGNED_SHORT</td><td>unsigned short int</td></tr>
<tr><td>MPI_UNSIGNED</td><td>unsigned int</td></tr>
<tr><td>MPI_UNSIGNED_LONG</td><td>unsigned long int</td></tr>
<tr><td>MPI_UNSIGNED_LONG_LONG</td><td>unsigned long long int</td></tr>
<tr><td>MPI_FLOAT</td><td>float</td></tr>
<tr><td>MPI_DOUBLE</td><td>double</td></tr>
<tr><td>MPI_LONG_DOUBLE</td><td>long double</td></tr>
<tr><td>MPI_BYTE</td><td>char</td></tr>
</tbody></table>
<h2 id="example-of-a-simple-program"><a class="header" href="#example-of-a-simple-program">Example of a simple program</a></h2>
<pre><code class="language-C">
/*
 MPI Program, send ranks
*/

#include &lt;stdio.h&gt;
#include &lt;mpi.h&gt;

#define MASTER 0

int main(int argc, char *argv[])
{

   int my_rank;
   /* Also known as world size */
   int num_processes;

   /* Initialize the infrastructure necessary for communication */
   MPI_Init(&amp;argc, &amp;argv);

   /* Identify this process */
   MPI_Comm_rank(MPI_COMM_WORLD, &amp;my_rank);

   /* Find out how many total processes are active */
   MPI_Comm_size(MPI_COMM_WORLD, &amp;num_processes);

   printf(&quot;Process %d: There is a total of %d \n&quot;, my_rank, num_processes);

   if (my_rank == MASTER)
   {
       int dest = 1;
       int tag = 0;
       int count = 1;

       MPI_Send(&amp;my_rank, count, MPI_INT, dest, tag, MPI_COMM_WORLD);

       printf(&quot;Process %d: Sent my_rank to process %d \n&quot;, my_rank, dest);
   }
   else
   {
       int tag = 0;
       int count = 1;
       int buffer;
       MPI_Recv(&amp;buffer, count, MPI_INT, MASTER, tag, MPI_COMM_WORLD, MPI_STATUS_IGNORE);
       printf(&quot;Process %d: Received %d from process %d \n&quot;, my_rank, buffer, MASTER);
   }

   /* Tear down the communication infrastructure */
   MPI_Finalize();
   return 0;
}
</code></pre>
<h2 id="compilation-and-linking"><a class="header" href="#compilation-and-linking">Compilation and Linking</a></h2>
<ul>
<li>Make sure you have the following packages installed and that they are in your $PATH:
<ul>
<li>gcc</li>
<li>OPENMPI or MPICH</li>
</ul>
</li>
<li>To compile and Link:
<ul>
<li><code>mpicc -Wall -o &lt;program-name.exe&gt; &lt;program-name.c&gt;</code></li>
<li>-Wall This enables all the warnings about questionable code.</li>
<li>-o sets the output executable name. If you omit it, it defaults to a.out</li>
</ul>
</li>
<li>To run:
<ul>
<li><code>mpirun -np &lt;Number-of-processes&gt; &lt;program-name.exe&gt;</code></li>
</ul>
</li>
<li>Behind the scenes:
<ul>
<li>mpicc is just a wrapper around a C compiler. To see what it does type:
<ul>
<li><code>mpicc –showme</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="sbatch-to-send-job-to-compute-nodes-using-slurm"><a class="header" href="#sbatch-to-send-job-to-compute-nodes-using-slurm">sbatch to send job to compute nodes using SLURM</a></h3>
<pre><code class="language-bash">#!/bin/bash
#SBATCH --job-name=Vaccinator
#SBATCH --ntasks=4
#SBATCH --ntasks-per-node=4
#SBATCH –time=00:10:00

~/vf38/HPC_Training/spack/share/spack/setup-env.sh
spack load mpich

mpirun -np 4 ./my-awesome-program
</code></pre>
<p><a href="https://docs.massive.org.au/M3/slurm/mpi-jobs.html">https://docs.massive.org.au/M3/slurm/mpi-jobs.html</a></p>
<ul>
<li>ntasks                           Controls the number of tasks to be created for the job</li>
<li>ntasks-per-node           Controls the maximum number of tasks per allocated node</li>
<li>cpus-per-task               Controls the number of CPUs allocated per task</li>
</ul>
<h2 id="measuring-performance-1"><a class="header" href="#measuring-performance-1">Measuring performance</a></h2>
<ul>
<li><code>htop</code> to check the CPU usage. You need to run this command while the process is running</li>
<li>If you are using SLURM, you will need to use <code>squeue</code> or <code>scontrol</code> to find the compute node it is running on and then ssh into it.</li>
<li><code>time</code> is a shell command to check the overall wall time , i.e.
<ul>
<li><code>time mpirun -np 4 myProg.exe</code></li>
<li>You can also use a MPI profiler</li>
</ul>
</li>
</ul>
<p>There are some useful commands to check the parallelism of the code.
The command top or htop looks into a process. As you can see from the image below, it shows the CPU usages</p>
<p><img src="chapter5/imgs/htop.png" alt="htop" /></p>
<ul>
<li>The command <code>time</code> checks the overall performance of the code
<ul>
<li>By running this command, you get real time, user time and system time.</li>
<li>Real is wall clock time - time from start to finish of the call. This includes the time of overhead</li>
</ul>
</li>
<li>User is the amount of CPU time spent outside the kernel within the process</li>
<li>Sys is the amount of CPU time spent in the kernel within the process.
<ul>
<li>User time +Sys time will tell you how much actual CPU time your process used.</li>
</ul>
</li>
</ul>
<p><img src="chapter5/imgs/time.png" alt="time" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="distributed-computing-challenges"><a class="header" href="#distributed-computing-challenges">Distributed Computing Challenges</a></h1>
<h2 id="overview-2"><a class="header" href="#overview-2">Overview</a></h2>
<ul>
<li><a href="chapter5/challenges.html#distributed-computing-challenges">Distributed Computing Challenges</a>
<ul>
<li><a href="chapter5/challenges.html#overview">Overview</a></li>
<li><a href="chapter5/challenges.html#pre-tasks">Pre-Tasks</a></li>
<li><a href="chapter5/challenges.html#task-1---multinode-hello-world">Task 1 - Multinode 'Hello, world!'</a></li>
<li><a href="chapter5/challenges.html#task-2---ping-pong">Task 2 - Ping Pong</a></li>
<li><a href="chapter5/challenges.html#task-3---multinode-sum">Task 3 - Multinode Sum</a></li>
<li><a href="chapter5/challenges.html#task-4---multinode-mergesort">Task 4 - Multinode Mergesort</a></li>
</ul>
</li>
</ul>
<h2 id="pre-tasks-1"><a class="header" href="#pre-tasks-1">Pre-Tasks</a></h2>
<p>For each task you will need to load MPICH using Spack from within your SLURM job script. There is a shared installation of Spack and MPICH within <code>vf38_scratch</code>. To load Spack and MPICH use the following to commands within you SLURM job script before any other command.</p>
<pre><code class="language-sh">. ~/vf38_scratch/spack/share/spack/setup-env.sh
spack load mpich
</code></pre>
<p>A template SLURM job file is given at the root of the distributed challenges directory. Copy this for each challenge into their respective sub-directories as every challenge will require running a SLURM job. If want to do some more experimenting, create multiple job scripts that use different amounts of nodes and test the execution time.</p>
<p>You will also need to generate some input for the sum and mergesort challenges. This can be done by compiling and running the program in <code>generate.cpp</code>. Run the following commands to build an generate the inputs for your challenges.</p>
<pre><code class="language-sh">module load gcc/10.2.0
g++ -std=c++20 -o bin/generate generate.cpp
bin/generate 1000000000
</code></pre>
<blockquote>
<p>Note:</p>
<ul>
<li>You do not have to worry about how to read the numbers from the file, this is handled for you already but it is recommended to look at the read function in <code>read.h</code> and understand what it is doing.</li>
<li>The expected output of the 'sum' challenge is found in the generated <code>output.txt</code> file within the challenges directory.
The expected output of the 'mergesort' challenge is found in the generated <code>sorted.txt</code> file within the challenges directory however this will contain a lot of values so a check function is provided that compares a resorted version of your input to your sorted output.
The sum and mergesort programs you will develop take a number as input. This is the size of the input data that you are performing your programs on. This should be the same number as the one used with the generator program. In the template programs for this challenge they are maked as an pointer to data called <code>input</code>.
Given the above setup and configuration, the input data will contain ~8GB of data or ~8.0e9 bytes so make sure to allocate enough resources both in the programs an in the SLURM job scripts.</li>
</ul>
</blockquote>
<h2 id="task-1---multinode-hello-world"><a class="header" href="#task-1---multinode-hello-world">Task 1 - Multinode 'Hello, world!'</a></h2>
<p>Your first task is to say 'Hello, world!' from different nodes on M3. This involves printing the nodes name, rank (ID) and the total number of nodes in the MPI environment.</p>
<h2 id="task-2---ping-pong"><a class="header" href="#task-2---ping-pong">Task 2 - Ping Pong</a></h2>
<p>For this next task you will play a Ping-Pong game of sorts between two nodes. This will involve passing a count between the two nodes and incrementing the count for each send and receive. This should increment the count to 10 in the end.</p>
<h2 id="task-3---multinode-sum"><a class="header" href="#task-3---multinode-sum">Task 3 - Multinode Sum</a></h2>
<p>Your next task is to sum the numbers in the generated <code>input.txt</code> file together across ten nodes. This will involve summing 1,000,000,000 floats together. The rough expected output is contained in the <code>output.txt</code> file. Remember the input array is already given in the template file.</p>
<h2 id="task-4---multinode-mergesort"><a class="header" href="#task-4---multinode-mergesort">Task 4 - Multinode Mergesort</a></h2>
<p>Your final task is to sort the numbers from the input file <code>unsorted.txt</code> using a distributed version of mergesort. This will involve ten nodes running their won mergesorts on chunks of the input data individually and then a final mergesort of the intermediate results. Remember the input array is already given in the template file.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="acknowledgements"><a class="header" href="#acknowledgements">Acknowledgements</a></h1>
<p>This book is part of Monash DeepNeurons collection of technical information and internal training resources. It is built and maintained internally by members of Monash DeepNeuron.</p>
<h2 id="authors"><a class="header" href="#authors">Authors</a></h2>
<ul>
<li><a href="https://github.com/oraqlle">Tyler Swann</a></li>
<li><a href="https://github.com/Ozzywap">Osman Haji</a></li>
<li><a href="https://github.com/UnciaBit">Yuki Kume</a></li>
<li><a href="https://github.com/jasparm">Jaspar Martin</a></li>
</ul>
<h2 id="contributors"><a class="header" href="#contributors">Contributors</a></h2>
<ul>
<li><a href="https://github.com/mmib0001">Mitchell Mibus</a></li>
<li><a href="https://github.com/ankitaagosavi">Ankita Gosavi</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
    </body>
</html>
